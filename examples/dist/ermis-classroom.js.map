{"version":3,"file":"ermis-classroom.js","sources":["../src/events/EventEmitter.js","../src/api/ApiClient.js","../src/core/Participant.js","../src/media/Publisher.js","../src/media/Subscriber.js","../src/media/AudioMixer.js","../src/core/Room.js","../src/core/SubRoom.js","../src/core/ErmisClient.js","../src/index.js","../src/raptorQ/raptorq_wasm.js"],"sourcesContent":["/**\n * Base EventEmitter class for handling events across the SDK\n */\nclass EventEmitter {\n  constructor() {\n    this._events = new Map();\n  }\n\n  on(event, listener) {\n    if (!this._events.has(event)) {\n      this._events.set(event, []);\n    }\n    this._events.get(event).push(listener);\n    return this;\n  }\n\n  off(event, listener) {\n    if (!this._events.has(event)) return this;\n\n    const listeners = this._events.get(event);\n    const index = listeners.indexOf(listener);\n    if (index !== -1) {\n      listeners.splice(index, 1);\n    }\n\n    if (listeners.length === 0) {\n      this._events.delete(event);\n    }\n    return this;\n  }\n\n  emit(event, ...args) {\n    if (!this._events.has(event)) return false;\n\n    const listeners = this._events.get(event);\n    listeners.forEach((listener) => {\n      try {\n        listener(...args);\n      } catch (error) {\n        console.error(`Error in event listener for ${event}:`, error);\n      }\n    });\n    return true;\n  }\n\n  once(event, listener) {\n    const onceWrapper = (...args) => {\n      this.off(event, onceWrapper);\n      listener(...args);\n    };\n    return this.on(event, onceWrapper);\n  }\n\n  removeAllListeners(event) {\n    if (event) {\n      this._events.delete(event);\n    } else {\n      this._events.clear();\n    }\n    return this;\n  }\n\n  listenerCount(event) {\n    return this._events.has(event) ? this._events.get(event).length : 0;\n  }\n}\n\nexport default EventEmitter;\n","/**\n * API Client for handling HTTP requests to Ermis Meeting API\n */\nclass ApiClient {\n  constructor(config) {\n    this.host = config.host || \"daibo.ermis.network:9992\";\n    this.apiBaseUrl = config.apiUrl || `https://${this.host}/meeting`;\n    this.jwtToken = null;\n    this.userId = null;\n  }\n\n  /**\n   * Set authentication token and user ID\n   */\n  setAuth(token, userId) {\n    this.jwtToken = token;\n    this.userId = userId;\n  }\n\n  /**\n   * Generic API call method\n   */\n  async apiCall(endpoint, method = \"GET\", body = null) {\n    if (!this.userId) {\n      throw new Error(\"Please authenticate first\");\n    }\n\n    if (!this.jwtToken) {\n      throw new Error(\"JWT token not found\");\n    }\n\n    const options = {\n      method,\n      headers: {\n        Authorization: `Bearer ${this.jwtToken}`,\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    try {\n      const response = await fetch(`${this.apiBaseUrl}${endpoint}`, options);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error(\"API call failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get dummy token for authentication\n   */\n  async getDummyToken(userId) {\n    const endpoint = \"/get-token\";\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ sub: userId }),\n    };\n\n    try {\n      const response = await fetch(`${this.apiBaseUrl}${endpoint}`, options);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error(\"Token request failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Create a new room\n   */\n  async createRoom(roomName, roomType = \"main\") {\n    return await this.apiCall(\"/rooms\", \"POST\", {\n      room_name: roomName,\n      room_type: roomType,\n    });\n  }\n\n  /**\n   * List available rooms\n   */\n  async listRooms(page = 1, perPage = 20) {\n    return await this.apiCall(\"/rooms/list\", \"POST\", {\n      list_query: {\n        page,\n        per_page: perPage,\n        sort_by: \"created_at\",\n        sort_order: \"desc\",\n      },\n      conditions: {\n        is_active: true,\n      },\n    });\n  }\n\n  /**\n   * Get room details by ID\n   */\n  async getRoomById(roomId) {\n    return await this.apiCall(`/rooms/${roomId}`);\n  }\n\n  /**\n   * Join a room by room code\n   */\n  async joinRoom(roomCode, appName = \"Ermis-Meeting\") {\n    return await this.apiCall(\"/rooms/join\", \"POST\", {\n      room_code: roomCode,\n      app_name: appName,\n    });\n  }\n\n  /**\n   * Create a sub room\n   */\n  async createSubRoom(parentRoomId, subRoomName, subRoomType = \"breakout\") {\n    return await this.apiCall(\"/rooms\", \"POST\", {\n      room_name: subRoomName,\n      room_type: subRoomType,\n      parent_room_id: parentRoomId,\n    });\n  }\n\n  /**\n   * Get sub rooms of a parent room\n   */\n  async getSubRooms(parentRoomId) {\n    return await this.apiCall(`/rooms/${parentRoomId}/sub-rooms`);\n  }\n\n  /**\n   * Leave a room\n   */\n  async leaveRoom(roomId, membershipId) {\n    return await this.apiCall(\n      `/rooms/${roomId}/members/${membershipId}`,\n      \"DELETE\"\n    );\n  }\n\n  /**\n   * Switch to sub room\n   */\n  async switchToSubRoom(roomId, subRoomCode) {\n    return await this.apiCall(\"/rooms/switch\", \"POST\", {\n      room_id: roomId,\n      sub_room_code: subRoomCode,\n    });\n  }\n\n  /**\n   * Get room members\n   */\n  async getRoomMembers(roomId) {\n    return await this.apiCall(`/rooms/${roomId}/members`);\n  }\n\n  /**\n   * Update room settings\n   */\n  async updateRoom(roomId, updates) {\n    return await this.apiCall(`/rooms/${roomId}`, \"PATCH\", updates);\n  }\n\n  /**\n   * Delete/Close room\n   */\n  async deleteRoom(roomId) {\n    return await this.apiCall(`/rooms/${roomId}`, \"DELETE\");\n  }\n}\n\nexport default ApiClient;\n","import EventEmitter from \"../events/EventEmitter.js\";\n\n/**\n * Represents a participant in a meeting room\n */\nclass Participant extends EventEmitter {\n  constructor(config) {\n    super();\n\n    this.userId = config.userId;\n    this.streamId = config.streamId;\n    this.membershipId = config.membershipId;\n    this.role = config.role || \"participant\";\n    this.roomId = config.roomId;\n    this.isLocal = config.isLocal || false;\n\n    // Media state\n    this.isAudioEnabled = true;\n    this.isVideoEnabled = true;\n    this.isPinned = false;\n\n    // Media components\n    this.publisher = null;\n    this.subscriber = null;\n\n    // Screen share state\n    this.isScreenSharing = config.isScreenSharing || false;\n    this.screenSubscriber = null;\n\n    // Status\n    this.connectionStatus = \"disconnected\"; // 'connecting', 'connected', 'disconnected', 'failed'\n  }\n\n  /**\n   * Get display name with role\n   */\n  getDisplayName() {\n    const roleText = this.role === \"owner\" ? \" (Host)\" : \"\";\n    const localText = this.isLocal ? \" (You)\" : \"\";\n    return `${this.userId}${roleText}${localText}`;\n  }\n\n  /**\n   * Toggle microphone (local only)\n   */\n  async toggleMicrophone() {\n    if (!this.isLocal || !this.publisher) return;\n\n    try {\n      await this.publisher.toggleMic();\n      this.isAudioEnabled = !this.isAudioEnabled;\n      this.emit(\"audioToggled\", {\n        participant: this,\n        enabled: this.isAudioEnabled,\n      });\n    } catch (error) {\n      this.emit(\"error\", {\n        participant: this,\n        error,\n        action: \"toggleMicrophone\",\n      });\n    }\n  }\n\n  /**\n   * Toggle camera (local only)\n   */\n  async toggleCamera() {\n    if (!this.isLocal || !this.publisher) return;\n\n    try {\n      await this.publisher.toggleCamera();\n      this.isVideoEnabled = !this.isVideoEnabled;\n      this.emit(\"videoToggled\", {\n        participant: this,\n        enabled: this.isVideoEnabled,\n      });\n    } catch (error) {\n      this.emit(\"error\", { participant: this, error, action: \"toggleCamera\" });\n    }\n  }\n\n  /**\n   * Toggle remote participant's audio\n   */\n  async toggleRemoteAudio() {\n    if (this.isLocal || !this.subscriber) return;\n\n    try {\n      await this.subscriber.toggleAudio();\n      this.isAudioEnabled = !this.isAudioEnabled;\n      this.emit(\"remoteAudioToggled\", {\n        participant: this,\n        enabled: this.isAudioEnabled,\n      });\n    } catch (error) {\n      this.emit(\"error\", {\n        participant: this,\n        error,\n        action: \"toggleRemoteAudio\",\n      });\n    }\n  }\n\n  /**\n   * Toggle pin status\n   */\n  togglePin() {\n    if (!this.isLocal) {\n      if (this.isPinned) {\n        this.subscriber?.switchBitrate(\"360p\");\n        console.warn(\"Unpin participant, switch to low quality\");\n      } else {\n        this.subscriber?.switchBitrate(\"720p\");\n        console.warn(\"Pin participant, switch to high quality\");\n      }\n    }\n\n    this.isPinned = !this.isPinned;\n    this.emit(\"pinToggled\", { participant: this, pinned: this.isPinned });\n  }\n\n  /**\n   * Update connection status\n   */\n  setConnectionStatus(status) {\n    this.connectionStatus = status;\n    this.emit(\"statusChanged\", { participant: this, status });\n  }\n\n  /**\n   * Get status text for display\n   */\n  _getStatusText(status) {\n    switch (status) {\n      case \"connecting\":\n        return \"Connecting...\";\n      case \"connected\":\n        return \"Connected\";\n      case \"disconnected\":\n        return \"Disconnected\";\n      case \"failed\":\n        return \"Connection Failed\";\n      default:\n        return status;\n    }\n  }\n\n  /**\n   * Set publisher instance\n   */\n  setPublisher(publisher) {\n    this.publisher = publisher;\n    if (publisher) {\n      this.setConnectionStatus(\"connected\");\n    }\n  }\n\n  /**\n   * Set subscriber instance\n   */\n  setSubscriber(subscriber) {\n    this.subscriber = subscriber;\n    if (subscriber) {\n      this.setConnectionStatus(\"connected\");\n    }\n  }\n\n  /**\n   * Update microphone status from server event\n   */\n  updateMicStatus(enabled) {\n    this.isAudioEnabled = enabled;\n    this.emit(\"remoteAudioStatusChanged\", {\n      participant: this,\n      enabled: this.isAudioEnabled,\n    });\n  }\n\n  /**\n   * Update camera status from server event\n   */\n  updateCameraStatus(enabled) {\n    this.isVideoEnabled = enabled;\n    this.emit(\"remoteVideoStatusChanged\", {\n      participant: this,\n      enabled: this.isVideoEnabled,\n    });\n  }\n\n  /**\n   * Cleanup participant resources\n   */\n  cleanup() {\n    // Stop media streams\n    if (this.publisher) {\n      this.publisher.stop();\n      this.publisher = null;\n    }\n\n    if (this.subscriber) {\n      this.subscriber.stop();\n      this.subscriber = null;\n    }\n\n    // Stop screen subscriber\n    if (this.screenSubscriber) {\n      this.screenSubscriber.stop();\n      this.screenSubscriber = null;\n    }\n\n    this.setConnectionStatus(\"disconnected\");\n    this.removeAllListeners();\n\n    this.emit(\"cleanup\", { participant: this });\n  }\n\n  /**\n   * Get participant info\n   */\n  getInfo() {\n    return {\n      userId: this.userId,\n      streamId: this.streamId,\n      membershipId: this.membershipId,\n      role: this.role,\n      isLocal: this.isLocal,\n      isAudioEnabled: this.isAudioEnabled,\n      isVideoEnabled: this.isVideoEnabled,\n      isPinned: this.isPinned,\n      isScreenSharing: this.isScreenSharing,\n      connectionStatus: this.connectionStatus,\n    };\n  }\n}\n\nexport default Participant;\n","import EventEmitter from \"../events/EventEmitter.js\";\n\n/**\n * WebRTC Publisher Class\n * Handles video/audio streaming via WebTransport\n */\nexport default class Publisher extends EventEmitter {\n  constructor(options = {}) {\n    super();\n\n    // Validate required options\n    if (!options.publishUrl) {\n      throw new Error(\"publishUrl is required\");\n    }\n\n    // Configuration\n    this.publishUrl = options.publishUrl;\n    this.streamType = options.streamType || \"camera\"; // 'camera' or 'display'\n    this.streamId = options.streamId || \"test_stream\";\n\n    // Video configuration\n    this.currentConfig = {\n      codec: \"avc1.640c34\",\n      width: options.width || 1280,\n      height: options.height || 720,\n      framerate: options.framerate || 30,\n      bitrate: options.bitrate || 1_500_000,\n    };\n\n    // Audio configuration\n    this.kSampleRate = 48000;\n    this.opusBaseTime = 0;\n    this.opusSamplesSent = 0;\n    this.opusSamplesPerChunk = 960; // 20ms at 48kHz\n    this.opusChunkCount = 0;\n\n    // State variables\n    this.stream = null;\n    this.audioProcessor = null;\n    this.videoProcessor = null;\n    this.webTransport = null;\n    this.isChannelOpen = false;\n    this.sequenceNumber = 0;\n    this.isPublishing = false;\n\n    this.cameraEnabled = true;\n    this.micEnabled = true;\n    this.hasCamera = options.hasCamera !== undefined ? options.hasCamera : true;\n    this.hasMic = options.hasMic !== undefined ? options.hasMic : true;\n\n    // Callbacks\n    this.onStatusUpdate =\n      options.onStatusUpdate || ((message, isError) => console.log(message));\n    this.onStreamStart = options.onStreamStart || (() => { });\n    this.onStreamStop = options.onStreamStop || (() => { });\n    this.onServerEvent = options.onServerEvent || ((event) => { });\n\n    // Initialize modules\n    this.wasmInitialized = false;\n    this.wasmInitializing = false;\n    this.wasmInitPromise = null;\n    this.initAudioRecorder = null;\n    this.WasmEncoder = null;\n\n    // Stream management\n    this.publishStreams = new Map(); // key: channelName, value: {writer, reader, configSent, config}\n    this.videoEncoders = new Map();\n    this.eventStream = null; // Dedicated event stream\n\n    this.subStreams = [\n      {\n        name: \"high\",\n        width: 1280,\n        height: 720,\n        bitrate: 800_000,\n        framerate: 30,\n        channelName: \"cam_720p\",\n      },\n      // {\n      //   name: \"low\",\n      //   width: 854,\n      //   height: 480,\n      //   bitrate: 500_000,\n      //   framerate: 30,\n      //   channelName: \"cam_360p\",\n      // },\n      {\n        name: \"low\",\n        width: 640,\n        height: 360,\n        bitrate: 400_000,\n        framerate: 30,\n        channelName: \"cam_360p\",\n      },\n      {\n        name: \"screen\",\n        width: 1920,\n        height: 1080,\n        bitrate: 2_000_000,\n        framerate: 30,\n        channelName: \"screen_share_1080p\",\n      },\n      {\n        name: \"microphone\",\n        channelName: \"mic_48k\",\n      },\n    ];\n  }\n\n  async init() {\n    await this.loadAllDependencies();\n    this.onStatusUpdate(\"Publisher initialized successfully\");\n  }\n\n  async loadAllDependencies() {\n    try {\n      if (\n        !document.querySelector('script[src*=\"MSTP_polyfill.js\"]')\n      ) {\n        await new Promise((resolve, reject) => {\n          const script = document.createElement(\"script\");\n          script.src = \"../polyfills/MSTP_polyfill.js\";\n          script.onload = () => resolve();\n          script.onerror = () =>\n            reject(new Error(\"Failed to load MSTP polyfill\"));\n          document.head.appendChild(script);\n        });\n        console.log(\"Polyfill loaded successfully\");\n      }\n\n      if (!this.wasmInitialized) {\n        if (this.wasmInitializing && this.wasmInitPromise) {\n          await this.wasmInitPromise;\n        } else {\n          this.wasmInitializing = true;\n          const { default: init, WasmEncoder } = await import(\n            \"../raptorQ/raptorq_wasm.js\"\n          );\n\n          this.WasmEncoder = WasmEncoder;\n\n          this.wasmInitPromise = init(\"../raptorQ/raptorq_wasm_bg.wasm\")\n            .then(() => {\n              this.wasmInitialized = true;\n              this.wasmInitializing = false;\n              console.log(\"WASM encoder module loaded successfully\");\n            })\n            .catch((err) => {\n              this.wasmInitializing = false;\n              console.error(\"Failed to load WASM encoder module:\", err);\n              throw new Error(\"Failed to load WASM encoder module\");\n            });\n\n          await this.wasmInitPromise;\n        }\n      }\n\n      const opusModule = await import(\n        `/opus_decoder/opusDecoder.js?t=${Date.now()}`\n      );\n      this.initAudioRecorder = opusModule.initAudioRecorder;\n      console.log(\"Opus decoder module loaded successfully\");\n\n      this.onStatusUpdate(\"All dependencies loaded successfully\");\n    } catch (error) {\n      this.onStatusUpdate(`Dependency loading error: ${error.message}`, true);\n      throw error;\n    }\n  }\n\n  async startPublishing() {\n    if (this.isPublishing) {\n      this.onStatusUpdate(\"Already publishing\", true);\n      return;\n    }\n    await this.init();\n\n    // Setup WebTransport connection\n    await this.setupConnection();\n\n    try {\n      // Get media stream based on type\n      await this.getMediaStream();\n      this.isPublishing = true;\n      // Start streaming\n      await this.startStreaming();\n\n      this.onStreamStart();\n      this.onStatusUpdate(\"Publishing started successfully\");\n    } catch (error) {\n      this.onStatusUpdate(`Failed to start publishing: ${error.message}`, true);\n      throw error;\n    }\n  }\n\n  // Toggle camera\n  async toggleCamera() {\n    if (this.cameraEnabled) {\n      await this.turnOffCamera();\n    } else {\n      await this.turnOnCamera();\n    }\n  }\n\n  // Toggle mic\n  async toggleMic() {\n    if (this.micEnabled) {\n      await this.turnOffMic();\n    } else {\n      await this.turnOnMic();\n    }\n  }\n\n  // Turn off camera (stop encoding video frames)\n  async turnOffCamera() {\n    if (!this.cameraEnabled) return;\n\n    this.cameraEnabled = false;\n    this.onStatusUpdate(\"Camera turned off\");\n\n    // Send camera_off event to server\n    await this.sendMeetingEvent(\"camera_off\");\n  }\n\n  // Turn on camera (resume encoding video frames)\n  async turnOnCamera() {\n    if (this.cameraEnabled) return;\n\n    this.cameraEnabled = true;\n    this.onStatusUpdate(\"Camera turned on\");\n\n    // Send camera_on event to server\n    await this.sendMeetingEvent(\"camera_on\");\n  }\n\n  // Turn off mic (stop encoding audio chunks)\n  async turnOffMic() {\n    if (!this.micEnabled) return;\n\n    this.micEnabled = false;\n    this.onStatusUpdate(\"Mic turned off\");\n\n    // Send mic_off event to server\n    await this.sendMeetingEvent(\"mic_off\");\n  }\n\n  // Turn on mic (resume encoding audio chunks)\n  async turnOnMic() {\n    if (this.micEnabled) return;\n\n    this.micEnabled = true;\n    this.onStatusUpdate(\"Mic turned on\");\n\n    // Send mic_on event to server\n    await this.sendMeetingEvent(\"mic_on\");\n  }\n\n  /**\n   * Send meeting control event to server\n   */\n  async sendMeetingEvent(eventType, targetStreamId = null) {\n    if (!eventType) return;\n\n    if (!this.isChannelOpen || !this.eventStream) {\n      console.warn(`Skipping ${eventType} event: Event stream not ready`);\n      return;\n    }\n    console.log(\"[Meeting Event] Sender stream ID:\", this.streamId);\n\n    const eventMessage = {\n      type: eventType,\n      sender_stream_id: this.streamId,\n      timestamp: Date.now(),\n    };\n\n    if (\n      (eventType === \"pin_for_everyone\" ||\n        eventType === \"unpin_for_everyone\") &&\n      targetStreamId\n    ) {\n      eventMessage.target_stream_id = targetStreamId;\n    }\n\n    try {\n      await this.sendEvent(eventMessage);\n      console.log(`Sent meeting event:`, eventMessage);\n    } catch (error) {\n      console.error(`Failed to send meeting event ${eventType}:`, error);\n      this.onStatusUpdate(`Failed to notify server about ${eventType}`, true);\n    }\n  }\n\n  async getMediaStream() {\n    if (this.streamType === \"camera\") {\n      const constraints = {\n        audio: {\n          sampleRate: this.kSampleRate,\n          channelCount: 1,\n          echoCancellation: true,\n          noiseSuppression: true,\n        },\n        video: {\n          width: { ideal: this.currentConfig.width },\n          height: { ideal: this.currentConfig.height },\n          frameRate: { ideal: this.currentConfig.framerate },\n        },\n      };\n      try {\n        this.stream = await navigator.mediaDevices.getUserMedia(constraints);\n      } catch (error) {\n        console.error(\"Error accessing media devices:\", error);\n      }\n    } else if (this.streamType === \"display\") {\n      this.stream = await navigator.mediaDevices.getDisplayMedia({\n        video: true,\n        audio: true,\n      });\n\n      // Handle user stopping screen share via browser UI\n      const videoTrack = this.stream.getVideoTracks()[0];\n      if (videoTrack) {\n        videoTrack.onended = () => {\n          this.stop();\n        };\n      }\n    }\n\n    // Create video-only stream for display\n    const videoOnlyStream = new MediaStream();\n    const videoTracks = this.stream.getVideoTracks();\n\n    if (videoTracks.length > 0) {\n      videoOnlyStream.addTrack(videoTracks[0]);\n    }\n\n    // Emit local stream ready event for app integration\n    this.emit(\"localStreamReady\", {\n      stream: this.stream,           // Full stream with audio + video\n      videoOnlyStream: videoOnlyStream, // Video only stream\n      streamType: this.streamType,\n      streamId: this.streamId,\n      config: this.currentConfig\n    });\n    this.onStatusUpdate(`${this.streamType} stream ready`);\n  }\n\n  initVideoEncoders() {\n    this.subStreams.forEach((subStream) => {\n      if (!subStream.channelName.startsWith(\"mic\")) {\n        console.log(`Setting up encoder for ${subStream.name}`);\n        const encoder = new VideoEncoder({\n          output: (chunk, metadata) =>\n            this.handleVideoChunk(\n              chunk,\n              metadata,\n              subStream.name,\n              subStream.channelName\n            ),\n          error: (e) =>\n            this.onStatusUpdate(\n              `Encoder ${subStream.name} error: ${e.message}`,\n              true\n            ),\n        });\n\n        this.videoEncoders.set(subStream.name, {\n          encoder,\n          channelName: subStream.channelName,\n          config: {\n            codec: this.currentConfig.codec,\n            width: subStream.width,\n            height: subStream.height,\n            bitrate: subStream.bitrate,\n            framerate: this.currentConfig.framerate,\n            latencyMode: \"realtime\",\n            hardwareAcceleration: \"prefer-hardware\",\n          },\n          metadataReady: false,\n          videoDecoderConfig: null,\n        });\n      }\n    });\n  }\n\n  async setupConnection() {\n    this.webTransport = new WebTransport(this.publishUrl);\n    await this.webTransport.ready;\n    console.log(\"WebTransport connected to server\");\n\n    await this.createEventStream();\n\n    for (const subStream of this.subStreams) {\n      if (!subStream.channelName.startsWith(\"screen\")) {\n        await this.createBidirectionalStream(subStream.channelName);\n      }\n    }\n\n    this.isChannelOpen = true;\n    this.onStatusUpdate(\n      \"WebTransport connection established with event stream and media streams\"\n    );\n  }\n\n  async createEventStream() {\n    const stream = await this.webTransport.createBidirectionalStream();\n    const readable = stream.readable;\n    const writable = stream.writable;\n\n    const writer = writable.getWriter();\n    const reader = readable.getReader();\n\n    this.eventStream = { writer, reader };\n\n    console.log(\"WebTransport event stream established\");\n\n    const initData = new TextEncoder().encode(\"meeting_control\");\n    await this.sendOverEventStream(initData);\n\n    // Setup reader cho event stream\n    this.setupEventStreamReader(reader);\n\n    await this.sendPublisherState();\n\n    const workerInterval = new Worker(\"polyfills/intervalWorker.js\");\n    workerInterval.postMessage({ interval: 1000 });\n    let lastPingTime = Date.now();\n\n    workerInterval.onmessage = (e) => {\n      const ping = new TextEncoder().encode(\"ping\");\n      this.sendOverEventStream(ping);\n      if (Date.now() - lastPingTime > 1200) {\n        console.warn(\"Ping delay detected, connection may be unstable\");\n      }\n      lastPingTime = Date.now();\n    };\n\n    // setInterval(() => {\n    //   const ping = new TextEncoder().encode(\"ping\");\n    //   this.sendOverEventStream(ping);\n    //   console.log(\"Ping sent to server\");\n    // }, 500);\n  }\n\n  setupEventStreamReader(reader) {\n    (async () => {\n      try {\n        while (true) {\n          const { value, done } = await reader.read();\n          if (done) {\n            console.log(\"Event stream closed by server\");\n            break;\n          }\n          if (value) {\n            const msg = new TextDecoder().decode(value);\n            try {\n              const event = JSON.parse(msg);\n              this.onServerEvent(event);\n            } catch (e) {\n              console.log(\"Non-JSON event message:\", msg);\n            }\n          }\n        }\n      } catch (err) {\n        console.error(\"Error reading from event stream:\", err);\n      }\n    })();\n  }\n\n  async sendOverEventStream(data) {\n    if (!this.eventStream) {\n      console.error(\"Event stream not available\");\n      return;\n    }\n\n    try {\n      const bytes =\n        typeof data === \"string\" ? new TextEncoder().encode(data) : data;\n\n      const len = bytes.length;\n      const out = new Uint8Array(4 + len);\n      const view = new DataView(out.buffer);\n      view.setUint32(0, len, false);\n      out.set(bytes, 4);\n      await this.eventStream.writer.write(out);\n    } catch (error) {\n      console.error(\"Failed to send over event stream:\", error);\n      throw error;\n    }\n  }\n\n  async sendEvent(eventData) {\n    const eventJson = JSON.stringify(eventData);\n    await this.sendOverEventStream(eventJson);\n  }\n\n  async sendPublisherState() {\n    const stateEvent = {\n      type: \"PublisherState\",\n      streamId: this.streamId,\n      hasCamera: this.hasCamera,\n      hasMic: this.hasMic,\n      cameraEnabled: this.hasCamera ? this.cameraEnabled : false,\n      micEnabled: this.hasMic ? this.micEnabled : false,\n      streamType: this.streamType, // 'camera' or 'display'\n      timestamp: Date.now(),\n    };\n\n    await this.sendEvent(stateEvent);\n    this.onStatusUpdate(\"Publisher state sent to server\");\n  }\n\n  async createBidirectionalStream(channelName) {\n    const stream = await this.webTransport.createBidirectionalStream();\n    const readable = stream.readable;\n    const writable = stream.writable;\n\n    const writer = writable.getWriter();\n    const reader = readable.getReader();\n\n    this.publishStreams.set(channelName, {\n      writer,\n      reader,\n      configSent: false,\n      config: null,\n    });\n\n    console.log(\n      `WebTransport bidirectional stream (${channelName}) established`\n    );\n\n    const initData = new TextEncoder().encode(channelName);\n    await this.sendOverStream(channelName, initData);\n\n    this.setupStreamReader(channelName, reader);\n\n    console.log(`Stream created: ${channelName}`);\n  }\n\n  setupStreamReader(channelName, reader) {\n    (async () => {\n      try {\n        while (true) {\n          const { value, done } = await reader.read();\n          if (done) {\n            console.log(`Stream ${channelName} closed by server`);\n            break;\n          }\n          if (value) {\n            const msg = new TextDecoder().decode(value);\n            if (msg.startsWith(\"ack:\") || msg.startsWith(\"config:\")) {\n              console.log(`${channelName} received:`, msg);\n            }\n          }\n        }\n      } catch (err) {\n        console.error(`Error reading from stream ${channelName}:`, err);\n      }\n    })();\n  }\n\n  async sendOverStream(channelName, frameBytes) {\n    const streamData = this.publishStreams.get(channelName);\n    if (!streamData) {\n      console.error(`Stream ${channelName} not found`);\n      return;\n    }\n\n    try {\n      const len = frameBytes.length;\n      const out = new Uint8Array(4 + len);\n      const view = new DataView(out.buffer);\n      view.setUint32(0, len, false);\n      out.set(frameBytes, 4);\n      await streamData.writer.write(out);\n    } catch (error) {\n      console.error(`Failed to send over stream ${channelName}:`, error);\n      throw error;\n    }\n  }\n\n  async startStreaming() {\n    // Start video capture\n    await this.startVideoCapture();\n\n    // Start audio streaming\n    this.audioProcessor = await this.startOpusAudioStreaming();\n  }\n\n  async startVideoCapture() {\n    if (!this.stream) {\n      throw new Error(\"No media stream available\");\n    }\n\n    this.initVideoEncoders();\n\n    this.videoEncoders.forEach((encoderObj) => {\n      console.log(\n        `Configuring encoder for ${encoderObj.channelName}`,\n        encoderObj,\n        \"config\",\n        encoderObj.config\n      );\n      encoderObj.encoder.configure(encoderObj.config);\n    });\n\n    const triggerWorker = new Worker(\"polyfills/triggerWorker.js\");\n    triggerWorker.postMessage({ frameRate: this.currentConfig.framerate });\n\n    const track = this.stream.getVideoTracks()[0];\n    console.log(\"Using video track:\", track);\n    this.videoProcessor = new MediaStreamTrackProcessor(\n      track,\n      triggerWorker,\n      true\n    );\n\n    const reader = this.videoProcessor.readable.getReader();\n    console.log(\"Video processor reader created:\", reader);\n\n    let frameCounter = 0;\n\n    const cameraEncoders = Array.from(this.videoEncoders.entries()).filter(\n      ([_, obj]) => obj.channelName.startsWith(\"cam\")\n    );\n\n    // Process video frames\n    (async () => {\n      try {\n        while (this.isPublishing) {\n          const result = await reader.read();\n\n          if (result.done) break;\n\n          const frame = result.value;\n\n          if (!window.videoBaseTimestamp) {\n            window.videoBaseTimestamp = frame.timestamp;\n          }\n\n          if (!this.cameraEnabled) {\n            console.log(\"Camera disabled, skipping frame\");\n            frame.close();\n            continue;\n          }\n\n          frameCounter++;\n          const keyFrame = frameCounter % 30 === 0;\n\n          for (let i = 0; i < cameraEncoders.length; i++) {\n            const [quality, encoderObj] = cameraEncoders[i];\n            const isLastEncoder = i === cameraEncoders.length - 1;\n\n            if (encoderObj.encoder.encodeQueueSize <= 2) {\n              const frameToEncode = isLastEncoder\n                ? frame\n                : new VideoFrame(frame);\n              encoderObj.encoder.encode(frameToEncode, { keyFrame });\n              frameToEncode.close();\n            }\n          }\n        }\n      } catch (error) {\n        this.onStatusUpdate(`Video processing error: ${error.message}`, true);\n        console.error(\"Video capture error:\", error);\n      }\n    })();\n  }\n\n  async startOpusAudioStreaming() {\n    if (!this.stream) {\n      throw new Error(\"No media stream available\");\n    }\n\n    const audioTrack = this.stream.getAudioTracks()[0];\n    if (!audioTrack) {\n      throw new Error(\"No audio track found in stream\");\n    }\n\n    const audioRecorderOptions = {\n      encoderApplication: 2051,\n      encoderComplexity: 0,\n      encoderFrameSize: 20,\n      timeSlice: 100,\n    };\n\n    const audioRecorder = await this.initAudioRecorder(\n      audioTrack,\n      audioRecorderOptions\n    );\n    audioRecorder.ondataavailable = (typedArray) =>\n      this.handleOpusAudioChunk(typedArray, \"mic_48k\");\n\n    await audioRecorder.start({\n      timeSlice: audioRecorderOptions.timeSlice,\n    });\n\n    return audioRecorder;\n  }\n\n  handleVideoChunk(chunk, metadata, quality, channelName) {\n    const encoderObj = this.videoEncoders.get(quality);\n    if (!encoderObj) return;\n\n    const streamData = this.publishStreams.get(channelName);\n    if (!streamData) return;\n\n    if (metadata && metadata.decoderConfig && !encoderObj.metadataReady) {\n      encoderObj.videoDecoderConfig = {\n        codec: metadata.decoderConfig.codec,\n        codedWidth: metadata.decoderConfig.codedWidth,\n        codedHeight: metadata.decoderConfig.codedHeight,\n        frameRate: this.currentConfig.framerate,\n        description: metadata.decoderConfig.description,\n      };\n      encoderObj.metadataReady = true;\n      console.warn(\n        \"Video config ready for\",\n        channelName,\n        encoderObj.videoDecoderConfig\n      );\n      this.sendStreamConfig(\n        channelName,\n        encoderObj.videoDecoderConfig,\n        \"video\"\n      );\n    }\n\n    if (!streamData.configSent) return;\n\n    const chunkData = new ArrayBuffer(chunk.byteLength);\n    chunk.copyTo(chunkData);\n    let type;\n    switch (channelName) {\n      case \"cam_360p\":\n        type = chunk.type === \"key\" ? 0 : 1;\n        break;\n      case \"cam_720p\":\n        type = chunk.type === \"key\" ? 2 : 3;\n        break;\n      case \"screen_share_1080p\":\n        type = chunk.type === \"key\" ? 4 : 5;\n        break;\n      default:\n        type = 8; // other\n    }\n    // const type = chunk.type === \"key\" ? \"video-key\" : \"video-delta\";\n\n    const packet = this.createPacketWithHeader(\n      chunkData,\n      chunk.timestamp,\n      type\n    );\n\n    this.sendOverStream(channelName, packet);\n    this.sequenceNumber++;\n  }\n\n  handleOpusAudioChunk(typedArray, channelName) {\n    if (!this.micEnabled) return;\n    if (!this.isChannelOpen || !typedArray || typedArray.byteLength === 0)\n      return;\n\n    const streamData = this.publishStreams.get(channelName);\n    if (!streamData) return;\n\n    try {\n      const dataArray = new Uint8Array(typedArray);\n      // Check for Opus header \"OggS\"\n      if (\n        dataArray.length >= 4 &&\n        dataArray[0] === 79 &&\n        dataArray[1] === 103 &&\n        dataArray[2] === 103 &&\n        dataArray[3] === 83\n      ) {\n        if (!streamData.configSent && !streamData.config) {\n          const description = this.createPacketWithHeader(\n            dataArray,\n            performance.now() * 1000,\n            6\n          );\n\n          const audioConfig = {\n            codec: \"opus\",\n            sampleRate: 48000,\n            numberOfChannels: 1,\n            description: description,\n          };\n\n          streamData.config = audioConfig;\n          this.sendStreamConfig(channelName, audioConfig, \"audio\");\n        }\n\n        // Initialize timing\n        if (this.opusBaseTime === 0 && window.videoBaseTimestamp) {\n          this.opusBaseTime = window.videoBaseTimestamp;\n          window.audioStartPerfTime = performance.now();\n          this.opusSamplesSent = 0;\n          this.opusChunkCount = 0;\n        } else if (this.opusBaseTime === 0 && !window.videoBaseTimestamp) {\n          this.opusBaseTime = performance.now() * 1000;\n          this.opusSamplesSent = 0;\n          this.opusChunkCount = 0;\n        }\n\n        const timestamp =\n          this.opusBaseTime +\n          Math.floor((this.opusSamplesSent * 1000000) / this.kSampleRate);\n\n        if (streamData.configSent) {\n          const packet = this.createPacketWithHeader(dataArray, timestamp, 6);\n\n          this.sendOverStream(channelName, packet);\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to send audio data:\", error);\n    }\n  }\n\n  async sendStreamConfig(channelName, config, mediaType) {\n    const streamData = this.publishStreams.get(channelName);\n    if (!streamData || streamData.configSent) return;\n\n    try {\n      let configPacket;\n\n      if (mediaType === \"video\") {\n        const vConfigUint8 = new Uint8Array(config.description);\n        const vConfigBase64 = this.uint8ArrayToBase64(vConfigUint8);\n\n        configPacket = {\n          type: \"StreamConfig\",\n          channelName: channelName,\n          mediaType: \"video\",\n          config: {\n            codec: config.codec,\n            codedWidth: config.codedWidth,\n            codedHeight: config.codedHeight,\n            frameRate: config.frameRate,\n            quality: config.quality,\n            description: vConfigBase64,\n          },\n        };\n      } else if (mediaType === \"audio\") {\n        const aConfigBase64 = this.uint8ArrayToBase64(\n          new Uint8Array(config.description)\n        );\n\n        configPacket = {\n          type: \"StreamConfig\",\n          channelName: channelName,\n          mediaType: \"audio\",\n          config: {\n            codec: config.codec,\n            sampleRate: config.sampleRate,\n            numberOfChannels: config.numberOfChannels,\n            description: aConfigBase64,\n          },\n        };\n      }\n      console.log(\"send stream config\", configPacket);\n      const packet = new TextEncoder().encode(JSON.stringify(configPacket));\n      await this.sendOverStream(channelName, packet);\n\n      streamData.configSent = true;\n      streamData.config = config;\n\n      this.onStatusUpdate(`Config sent for stream: ${channelName}`);\n    } catch (error) {\n      console.error(`Failed to send config for ${channelName}:`, error);\n    }\n  }\n\n  createPacketWithHeader(data, timestamp, type) {\n    let adjustedTimestamp = timestamp;\n    if (window.videoBaseTimestamp) {\n      adjustedTimestamp = timestamp - window.videoBaseTimestamp;\n    }\n\n    let safeTimestamp = Math.floor(adjustedTimestamp / 1000);\n    if (safeTimestamp < 0) safeTimestamp = 0;\n\n    const HEADER_SIZE = 5;\n    const MAX_TS = 0xffffffff;\n    const MIN_TS = 0;\n\n    if (safeTimestamp > MAX_TS) safeTimestamp = MAX_TS;\n    if (safeTimestamp < MIN_TS) safeTimestamp = MIN_TS;\n\n    const packet = new Uint8Array(\n      HEADER_SIZE +\n      (data instanceof ArrayBuffer ? data.byteLength : data.length)\n    );\n    // type mapping\n    // video-360p-key = 0\n    // video-360p-delta = 1\n    // video-720p-key = 2\n    // video-720p-delta = 3\n    // video-1080p-key = 4\n    // video-1080p-delta = 5\n    // audio = 6\n    // config = 7\n    // other = 8\n\n    packet[4] = type;\n\n    const view = new DataView(packet.buffer, 0, 4);\n    view.setUint32(0, safeTimestamp, false);\n\n    packet.set(\n      data instanceof ArrayBuffer ? new Uint8Array(data) : data,\n      HEADER_SIZE\n    );\n\n    return packet;\n  }\n\n  uint8ArrayToBase64(bytes) {\n    let binary = \"\";\n    const chunkSize = 0x8000;\n    for (let i = 0; i < bytes.length; i += chunkSize) {\n      const chunk = bytes.subarray(i, i + chunkSize);\n      binary += String.fromCharCode.apply(null, chunk);\n    }\n    return btoa(binary);\n  }\n\n  /**\n   * Start screen sharing\n   */\n  async startShareScreen(stream) {\n    if (!stream) {\n      throw new Error(\"No stream provided for screen sharing\");\n    }\n\n    this.screenStream = stream;\n    this.isScreenSharing = true;\n\n    const channelName = \"screen_share_1080p\";\n\n    try {\n      // Create WebTransport stream for screen share\n      await this.createBidirectionalStream(channelName);\n\n      // Send start_share_screen event\n      const startEvent = {\n        type: \"start_share_screen\",\n        sender_stream_id: this.streamId,\n      };\n      await this.sendEvent(startEvent);\n\n      const videoTrack = stream.getVideoTracks()[0];\n      const audioTrack = stream.getAudioTracks()[0];\n\n      if (!videoTrack) {\n        throw new Error(\"No video track found in screen share stream\");\n      }\n\n      // Setup screen share video encoder\n      const screenConfig = this.subStreams.find(\n        (s) => s.channelName === channelName\n      );\n\n      const screenEncoder = new VideoEncoder({\n        output: (chunk, metadata) =>\n          this.handleScreenVideoChunk(chunk, metadata, channelName),\n        error: (e) =>\n          this.onStatusUpdate(`Screen encoder error: ${e.message}`, true),\n      });\n\n      const encoderConfig = {\n        codec: this.currentConfig.codec,\n        width: screenConfig.width,\n        height: screenConfig.height,\n        bitrate: screenConfig.bitrate,\n        framerate: screenConfig.framerate,\n        latencyMode: \"realtime\",\n        hardwareAcceleration: \"prefer-hardware\",\n      };\n\n      screenEncoder.configure(encoderConfig);\n\n      this.screenVideoEncoder = {\n        encoder: screenEncoder,\n        config: encoderConfig,\n        metadataReady: false,\n        videoDecoderConfig: null,\n      };\n\n      // Setup screen share audio if available\n      if (audioTrack) {\n        const audioRecorderOptions = {\n          encoderApplication: 2051,\n          encoderComplexity: 0,\n          encoderFrameSize: 20,\n          timeSlice: 100,\n        };\n\n        this.screenAudioRecorder = await this.initAudioRecorder(\n          audioTrack,\n          audioRecorderOptions\n        );\n\n        this.screenAudioRecorder.ondataavailable = (typedArray) =>\n          this.handleScreenAudioChunk(typedArray, channelName);\n\n        await this.screenAudioRecorder.start({\n          timeSlice: audioRecorderOptions.timeSlice,\n        });\n\n        this.screenAudioBaseTime = 0;\n        this.screenAudioSamplesSent = 0;\n      }\n\n      // Start video processing\n      const triggerWorker = new Worker(\"polyfills/triggerWorker.js\");\n      triggerWorker.postMessage({ frameRate: screenConfig.framerate });\n\n      this.screenVideoProcessor = new MediaStreamTrackProcessor(\n        videoTrack,\n        triggerWorker,\n        true\n      );\n\n      const reader = this.screenVideoProcessor.readable.getReader();\n      let frameCounter = 0;\n\n      // Handle video track ending\n      videoTrack.onended = () => {\n        this.stopShareScreen();\n      };\n\n      // Process screen share video frames\n      (async () => {\n        try {\n          while (this.isScreenSharing) {\n            const result = await reader.read();\n            if (result.done) break;\n\n            const frame = result.value;\n\n            if (!window.screenBaseTimestamp) {\n              window.screenBaseTimestamp = frame.timestamp;\n            }\n\n            frameCounter++;\n            const keyFrame = frameCounter % 30 === 0;\n\n            if (this.screenVideoEncoder.encoder.encodeQueueSize <= 2) {\n              this.screenVideoEncoder.encoder.encode(frame, { keyFrame });\n            }\n\n            frame.close();\n          }\n        } catch (error) {\n          this.onStatusUpdate(\n            `Screen share video error: ${error.message}`,\n            true\n          );\n          console.error(\"Screen share video error:\", error);\n        }\n      })();\n\n      this.onStatusUpdate(\"Screen sharing started\");\n    } catch (error) {\n      this.onStatusUpdate(\n        `Failed to start screen share: ${error.message}`,\n        true\n      );\n      this.stopShareScreen();\n      throw error;\n    }\n  }\n\n  /**\n   * Stop screen sharing\n   */\n  async stopShareScreen() {\n    if (!this.isScreenSharing) {\n      return;\n    }\n\n    try {\n      this.isScreenSharing = false;\n\n      const channelName = \"screen_share_1080p\";\n\n      // Send stop event to server\n      const stopEvent = {\n        type: \"stop_share_screen\",\n        sender_stream_id: this.streamId,\n      };\n      await this.sendEvent(stopEvent);\n\n      // Stop and close video encoder\n      if (this.screenVideoEncoder && this.screenVideoEncoder.encoder) {\n        if (this.screenVideoEncoder.encoder.state !== \"closed\") {\n          await this.screenVideoEncoder.encoder.flush();\n          this.screenVideoEncoder.encoder.close();\n        }\n        this.screenVideoEncoder = null;\n      }\n\n      // Stop audio recorder\n      if (\n        this.screenAudioRecorder &&\n        typeof this.screenAudioRecorder.stop === \"function\"\n      ) {\n        await this.screenAudioRecorder.stop();\n        this.screenAudioRecorder = null;\n      }\n\n      // Close screen share stream\n      const streamData = this.publishStreams.get(channelName);\n      if (streamData && streamData.writer) {\n        await streamData.writer.close();\n        this.publishStreams.delete(channelName);\n      }\n\n      // Stop all tracks in screen stream\n      if (this.screenStream) {\n        this.screenStream.getTracks().forEach((track) => track.stop());\n        this.screenStream = null;\n      }\n\n      // Reset state\n      this.screenAudioBaseTime = 0;\n      this.screenAudioSamplesSent = 0;\n      this.screenAudioConfig = null;\n      window.screenBaseTimestamp = null;\n\n      this.onStatusUpdate(\"Screen sharing stopped\");\n    } catch (error) {\n      this.onStatusUpdate(\n        `Error stopping screen share: ${error.message}`,\n        true\n      );\n      throw error;\n    }\n  }\n\n  /**\n   * Handle screen share video chunks\n   */\n  handleScreenVideoChunk(chunk, metadata, channelName) {\n    if (!this.screenVideoEncoder) return;\n\n    const streamData = this.publishStreams.get(channelName);\n    if (!streamData) return;\n\n    // Handle metadata\n    if (\n      metadata &&\n      metadata.decoderConfig &&\n      !this.screenVideoEncoder.metadataReady\n    ) {\n      this.screenVideoEncoder.videoDecoderConfig = {\n        codec: metadata.decoderConfig.codec,\n        codedWidth: metadata.decoderConfig.codedWidth,\n        codedHeight: metadata.decoderConfig.codedHeight,\n        frameRate: this.screenVideoEncoder.config.framerate,\n        description: metadata.decoderConfig.description,\n      };\n      this.screenVideoEncoder.metadataReady = true;\n\n      console.log(\n        \"Screen video config ready:\",\n        this.screenVideoEncoder.videoDecoderConfig\n      );\n\n      this.sendScreenDecoderConfigs(channelName);\n    }\n\n    if (!streamData.configSent) return;\n\n    const chunkData = new ArrayBuffer(chunk.byteLength);\n    chunk.copyTo(chunkData);\n    const type = chunk.type === \"key\" ? 4 : 5; // screen_share_1080p key/delta\n\n    const packet = this.createPacketWithHeader(\n      chunkData,\n      chunk.timestamp,\n      type\n    );\n\n    this.sendOverStream(channelName, packet);\n  }\n\n  /**\n   * Handle screen share audio chunks\n   */\n  handleScreenAudioChunk(typedArray, channelName) {\n    if (!this.isScreenSharing || !typedArray || typedArray.byteLength === 0)\n      return;\n\n    const streamData = this.publishStreams.get(channelName);\n    if (!streamData) return;\n\n    try {\n      const dataArray = new Uint8Array(typedArray);\n\n      // Check for Opus header\n      if (\n        dataArray.length >= 4 &&\n        dataArray[0] === 79 &&\n        dataArray[1] === 103 &&\n        dataArray[2] === 103 &&\n        dataArray[3] === 83\n      ) {\n        if (!this.screenAudioConfig) {\n          const description = this.createPacketWithHeader(\n            dataArray,\n            performance.now() * 1000,\n            6\n          );\n\n          this.screenAudioConfig = {\n            codec: \"opus\",\n            sampleRate: 48000,\n            numberOfChannels: 2,\n            description: description,\n          };\n\n          console.log(\"Screen audio config ready:\", this.screenAudioConfig);\n          this.sendScreenDecoderConfigs(channelName);\n        }\n\n        // Initialize timing\n        if (this.screenAudioBaseTime === 0 && window.screenBaseTimestamp) {\n          this.screenAudioBaseTime = window.screenBaseTimestamp;\n          this.screenAudioSamplesSent = 0;\n        } else if (\n          this.screenAudioBaseTime === 0 &&\n          !window.screenBaseTimestamp\n        ) {\n          this.screenAudioBaseTime = performance.now() * 1000;\n          this.screenAudioSamplesSent = 0;\n        }\n\n        const timestamp =\n          this.screenAudioBaseTime +\n          Math.floor((this.screenAudioSamplesSent * 1000000) / 48000);\n\n        if (streamData.configSent) {\n          const packet = this.createPacketWithHeader(dataArray, timestamp, 6);\n          this.sendOverStream(channelName, packet);\n        }\n\n        this.screenAudioSamplesSent += 960;\n      }\n    } catch (error) {\n      console.error(\"Failed to send screen audio data:\", error);\n    }\n  }\n\n  /**\n   * Send screen share decoder configs\n   */\n  async sendScreenDecoderConfigs(channelName) {\n    const streamData = this.publishStreams.get(channelName);\n    if (!streamData || streamData.configSent) return;\n\n    const hasAudio = this.screenAudioRecorder !== null;\n    const videoReady =\n      this.screenVideoEncoder && this.screenVideoEncoder.metadataReady;\n    const audioReady = !hasAudio || this.screenAudioConfig;\n\n    if (!videoReady || !audioReady) {\n      return;\n    }\n\n    try {\n      const vConfigUint8 = new Uint8Array(\n        this.screenVideoEncoder.videoDecoderConfig.description\n      );\n      const vConfigBase64 = this.uint8ArrayToBase64(vConfigUint8);\n\n      const config = {\n        type: \"DecoderConfigs\",\n        channelName: channelName,\n        videoConfig: {\n          codec: this.screenVideoEncoder.videoDecoderConfig.codec,\n          codedWidth: this.screenVideoEncoder.videoDecoderConfig.codedWidth,\n          codedHeight: this.screenVideoEncoder.videoDecoderConfig.codedHeight,\n          frameRate: this.screenVideoEncoder.videoDecoderConfig.frameRate,\n          description: vConfigBase64,\n        },\n      };\n\n      if (this.screenAudioConfig) {\n        const aConfigBase64 = this.uint8ArrayToBase64(\n          new Uint8Array(this.screenAudioConfig.description)\n        );\n\n        config.audioConfig = {\n          codec: this.screenAudioConfig.codec,\n          sampleRate: this.screenAudioConfig.sampleRate,\n          numberOfChannels: this.screenAudioConfig.numberOfChannels,\n          description: aConfigBase64,\n        };\n      }\n\n      console.log(\"Sending screen share decoder configs:\", config);\n      const packet = new TextEncoder().encode(JSON.stringify(config));\n      await this.sendOverStream(channelName, packet);\n\n      streamData.configSent = true;\n      this.onStatusUpdate(`Screen share configs sent for: ${channelName}`);\n    } catch (error) {\n      console.error(`Failed to send screen share configs:`, error);\n    }\n  }\n\n  async stop() {\n    if (!this.isPublishing) {\n      return;\n    }\n\n    try {\n      this.isPublishing = false;\n\n      // Stop screen sharing if active\n      if (this.isScreenSharing) {\n        await this.stopShareScreen();\n      }\n\n      // Close video encoders\n      for (const [quality, encoderObj] of this.videoEncoders) {\n        if (encoderObj.encoder && encoderObj.encoder.state !== \"closed\") {\n          await encoderObj.encoder.flush();\n          encoderObj.encoder.close();\n        }\n      }\n      this.videoEncoders.clear();\n\n      // Stop audio processor\n      if (\n        this.audioProcessor &&\n        typeof this.audioProcessor.stop === \"function\"\n      ) {\n        await this.audioProcessor.stop();\n        this.audioProcessor = null;\n      }\n\n      // Close all streams\n      for (const [channelName, streamData] of this.publishStreams) {\n        if (streamData.writer) {\n          await streamData.writer.close();\n        }\n      }\n      this.publishStreams.clear();\n\n      // Close event stream\n      if (this.eventStream && this.eventStream.writer) {\n        await this.eventStream.writer.close();\n        this.eventStream = null;\n      }\n\n      // Close WebTransport\n      if (this.webTransport) {\n        this.webTransport.close();\n        this.webTransport = null;\n      }\n\n      // Stop all tracks\n      if (this.stream) {\n        this.stream.getTracks().forEach((track) => track.stop());\n        this.stream = null;\n      }\n\n      // Reset state\n      this.isChannelOpen = false;\n      this.sequenceNumber = 0;\n      this.opusBaseTime = 0;\n      this.opusSamplesSent = 0;\n      this.opusChunkCount = 0;\n\n      // Clear global variables\n      window.videoBaseTimestamp = null;\n      window.audioStartPerfTime = null;\n\n      this.onStreamStop();\n      this.onStatusUpdate(\"Publishing stopped\");\n    } catch (error) {\n      this.onStatusUpdate(`Error stopping publishing: ${error.message}`, true);\n      throw error;\n    }\n  }\n\n  // Getters for state\n  get isActive() {\n    return this.isPublishing;\n  }\n\n  get streamInfo() {\n    return {\n      streamType: this.streamType,\n      config: this.currentConfig,\n      sequenceNumber: this.sequenceNumber,\n      activeStreams: Array.from(this.publishStreams.keys()),\n    };\n  }\n}\n","import EventEmitter from \"../events/EventEmitter.js\";\n\n/**\n * Enhanced Subscriber class for receiving media streams\n * Refactored from EnhancedSubscriber with better structure\n */\nclass Subscriber extends EventEmitter {\n  constructor(config) {\n    super();\n\n    // Configuration\n    this.streamId = config.streamId || \"\";\n    this.roomId = config.roomId || \"\";\n    this.host = config.host || \"stream-gate.bandia.vn\";\n    this.isOwnStream = config.isOwnStream || false;\n\n    // Media configuration\n    this.mediaWorkerUrl = config.mediaWorkerUrl || \"workers/media-worker-ab.js\";\n    this.audioWorkletUrl =\n      config.audioWorkletUrl || \"workers/audio-worklet1.js\";\n    this.mstgPolyfillUrl =\n      config.mstgPolyfillUrl || \"polyfills/MSTG_polyfill.js\";\n\n    // State\n    this.isStarted = false;\n    this.isAudioEnabled = true;\n    this.connectionStatus = \"disconnected\"; // 'disconnected', 'connecting', 'connected', 'failed'\n\n    // Media components\n    this.worker = null;\n    this.audioWorkletNode = null;\n    this.videoGenerator = null;\n    this.videoWriter = null;\n    this.mediaStream = null;\n\n    // Unique subscriber ID\n    this.subscriberId = `subscriber_${this.streamId}_${Date.now()}`;\n\n    // Audio mixer reference (will be set externally)\n    this.audioMixer = null;\n  }\n\n  /**\n   * Start the subscriber\n   */\n  async start() {\n    if (this.isStarted) {\n      throw new Error(\"Subscriber already started\");\n    }\n\n    try {\n      console.log(\"Starting subscriber:\", this.subscriberId);\n      this.emit(\"starting\", { subscriber: this });\n      this._updateConnectionStatus(\"connecting\");\n\n      const channel = new MessageChannel();\n\n      await this._loadPolyfill();\n      await this._initWorker(channel.port2);\n      await this._initAudioSystem(channel.port1);\n      this._initVideoSystem();\n\n      this.isStarted = true;\n      this._updateConnectionStatus(\"connected\");\n      this.emit(\"started\", { subscriber: this });\n    } catch (error) {\n      this._updateConnectionStatus(\"failed\");\n      this.emit(\"error\", { subscriber: this, error, action: \"start\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Stop the subscriber\n   */\n  stop() {\n    if (!this.isStarted) {\n      return;\n    }\n\n    try {\n      this.emit(\"stopping\", { subscriber: this });\n\n      // Remove from audio mixer\n      if (this.audioMixer) {\n        this.audioMixer.removeSubscriber(this.subscriberId);\n      }\n\n      // Terminate worker\n      if (this.worker) {\n        this.worker.terminate();\n        this.worker = null;\n      }\n\n      // Emit stream removal event for app integration\n      if (this.mediaStream) {\n        this.emit(\"streamRemoved\", {\n          streamId: this.streamId,\n          subscriberId: this.subscriberId,\n          roomId: this.roomId\n        });\n      }\n\n      // Close video components\n      this._cleanupVideoSystem();\n\n      // Clear references\n      this.audioWorkletNode = null;\n      this.mediaStream = null;\n\n      this.isStarted = false;\n      this._updateConnectionStatus(\"disconnected\");\n      this.emit(\"stopped\", { subscriber: this });\n    } catch (error) {\n      this.emit(\"error\", { subscriber: this, error, action: \"stop\" });\n    }\n  }\n\n  /**\n   * Toggle audio on/off\n   */\n  async toggleAudio() {\n    if (!this.isStarted || !this.worker) {\n      throw new Error(\"Subscriber not started\");\n    }\n\n    try {\n      this.worker.postMessage({ type: \"toggleAudio\" });\n      this.isAudioEnabled = !this.isAudioEnabled;\n\n      this.emit(\"audioToggled\", {\n        subscriber: this,\n        enabled: this.isAudioEnabled,\n      });\n\n      return this.isAudioEnabled;\n    } catch (error) {\n      this.emit(\"error\", { subscriber: this, error, action: \"toggleAudio\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Set audio mixer reference\n   */\n  setAudioMixer(audioMixer) {\n    this.audioMixer = audioMixer;\n  }\n\n  /**\n   * Get subscriber info\n   */\n  getInfo() {\n    return {\n      subscriberId: this.subscriberId,\n      streamId: this.streamId,\n      roomId: this.roomId,\n      host: this.host,\n      isOwnStream: this.isOwnStream,\n      isStarted: this.isStarted,\n      isAudioEnabled: this.isAudioEnabled,\n      connectionStatus: this.connectionStatus,\n    };\n  }\n\n  /**\n   * Load MediaStreamTrackGenerator polyfill if needed\n   */\n  async _loadPolyfill() {\n    if (!window.MediaStreamTrackGenerator) {\n      try {\n        await import(this.mstgPolyfillUrl);\n      } catch (error) {\n        console.warn(\"Failed to load MSTG polyfill:\", error);\n      }\n    }\n  }\n\n  /**\n   * Initialize media worker\n   */\n  async _initWorker(channelPort) {\n    try {\n      this.worker = new Worker(`${this.mediaWorkerUrl}?t=${Date.now()}`, {\n        type: \"module\",\n      });\n\n      this.worker.onmessage = (e) => this._handleWorkerMessage(e);\n      this.worker.onerror = (error) => {\n        this.emit(\"error\", {\n          subscriber: this,\n          error: new Error(`Media Worker error: ${error.message}`),\n          action: \"workerError\",\n        });\n      };\n\n      const mediaUrl = `wss://sfu-adaptive-bitrate.ermis-network.workers.dev/meeting/${this.roomId}/${this.streamId}`;\n      console.log(\"try to init worker with url:\", mediaUrl);\n\n      this.worker.postMessage(\n        {\n          type: \"init\",\n          data: { mediaUrl },\n          port: channelPort,\n          quality: \"360p\", // default quality\n        },\n        [channelPort]\n      );\n    } catch (error) {\n      throw new Error(`Worker initialization failed: ${error.message}`);\n    }\n  }\n\n  switchBitrate(quality) {\n    // 360p | 720p\n    if (this.worker) {\n      this.worker.postMessage({\n        type: \"switchBitrate\",\n        quality,\n      });\n    }\n  }\n\n  /**\n   * Initialize audio system with mixer\n   */\n  async _initAudioSystem(channelPort) {\n    try {\n      // Skip audio setup for own stream to prevent echo\n      if (this.isOwnStream) {\n        this.emit(\"audioSkipped\", {\n          subscriber: this,\n          reason: \"Own stream - preventing echo\",\n        });\n        return;\n      }\n\n      // Audio mixer should be set externally before starting\n      if (this.audioMixer) {\n        console.warn(\n          \"Adding subscriber to audio mixer in new subscriber:\",\n          this.subscriberId\n        );\n        this.audioWorkletNode = await this.audioMixer.addSubscriber(\n          this.subscriberId,\n          this.audioWorkletUrl,\n          this.isOwnStream,\n          channelPort\n        );\n\n        if (this.audioWorkletNode) {\n          this.audioWorkletNode.port.onmessage = (event) => {\n            const { type, bufferMs, isPlaying, newBufferSize } = event.data;\n            this.emit(\"audioStatus\", {\n              subscriber: this,\n              type,\n              bufferMs,\n              isPlaying,\n              newBufferSize,\n            });\n          };\n        }\n      }\n\n      this.emit(\"audioInitialized\", { subscriber: this });\n    } catch (error) {\n      throw new Error(`Audio system initialization failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Initialize video system\n   */\n  _initVideoSystem() {\n    try {\n      if (typeof MediaStreamTrackGenerator === \"function\") {\n        this.videoGenerator = new MediaStreamTrackGenerator({\n          kind: \"video\",\n        });\n      } else {\n        throw new Error(\n          \"MediaStreamTrackGenerator not supported in this browser\"\n        );\n      }\n\n      this.videoWriter = this.videoGenerator.writable;\n\n      // Create MediaStream with video track only\n      this.mediaStream = new MediaStream([this.videoGenerator]);\n\n      // Emit remote stream ready event for app integration\n      this.emit(\"remoteStreamReady\", {\n        stream: this.mediaStream,\n        streamId: this.streamId,\n        subscriberId: this.subscriberId,\n        roomId: this.roomId,\n        isOwnStream: this.isOwnStream\n      });\n      this.emit(\"videoInitialized\", { subscriber: this });\n    } catch (error) {\n      throw new Error(`Video system initialization failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Cleanup video system\n   */\n  _cleanupVideoSystem() {\n    try {\n      // Close video writer\n      if (this.videoWriter) {\n        try {\n          const writer = this.videoWriter.getWriter();\n          writer.releaseLock();\n        } catch (e) {\n          // Writer might already be released\n        }\n        this.videoWriter = null;\n      }\n\n      // Stop video generator\n      if (this.videoGenerator) {\n        try {\n          if (this.videoGenerator.stop) {\n            this.videoGenerator.stop();\n          }\n        } catch (e) {\n          // Generator might already be stopped\n        }\n        this.videoGenerator = null;\n      }\n    } catch (error) {\n      console.warn(\"Error cleaning video system:\", error);\n    }\n  }\n\n  /**\n   * Handle messages from media worker\n   */\n  _handleWorkerMessage(e) {\n    const {\n      type,\n      frame,\n      message,\n      channelData,\n      sampleRate,\n      numberOfChannels,\n      timeStamp,\n      subscriberId,\n      audioEnabled,\n    } = e.data;\n\n    switch (type) {\n      case \"videoData\":\n        this._handleVideoData(frame);\n        break;\n\n      case \"status\":\n        this.emit(\"status\", { subscriber: this, message, isError: false });\n        break;\n\n      case \"error\":\n        this.emit(\"status\", { subscriber: this, message, isError: true });\n        this.emit(\"error\", {\n          subscriber: this,\n          error: new Error(message),\n          action: \"workerMessage\",\n        });\n        break;\n\n      case \"audio-toggled\":\n        this.emit(\"audioToggled\", {\n          subscriber: this,\n          enabled: audioEnabled,\n        });\n        break;\n\n      case \"skipping\":\n        this.emit(\"frameSkipped\", { subscriber: this });\n        break;\n\n      case \"resuming\":\n        this.emit(\"frameResumed\", { subscriber: this });\n        break;\n\n      default:\n        console.log(`Unknown worker message type: ${type}`, e.data);\n    }\n  }\n\n  /**\n   * Handle video data from worker\n   */\n  async _handleVideoData(frame) {\n    if (this.videoWriter && frame) {\n      try {\n        const writer = this.videoWriter.getWriter();\n        await writer.write(frame);\n        writer.releaseLock();\n\n        this.emit(\"videoFrameProcessed\", { subscriber: this });\n      } catch (error) {\n        this.emit(\"error\", {\n          subscriber: this,\n          error: new Error(`Video write error: ${error.message}`),\n          action: \"videoWrite\",\n        });\n      }\n    }\n  }\n\n  /**\n   * Update connection status\n   */\n  _updateConnectionStatus(status) {\n    if (this.connectionStatus === status) return;\n\n    const previousStatus = this.connectionStatus;\n    this.connectionStatus = status;\n\n    this.emit(\"connectionStatusChanged\", {\n      subscriber: this,\n      status,\n      previousStatus,\n    });\n  }\n}\n\nexport default Subscriber;\n","/**\n * AudioMixer Class for combining multiple subscriber audio streams\n * Provides centralized audio mixing and playback management\n */\nclass AudioMixer {\n  constructor(config = {}) {\n    this.audioContext = null;\n    this.mixerNode = null;\n    this.outputDestination = null;\n    this.subscriberNodes = new Map(); // subscriberId -> AudioWorkletNode\n    this.isInitialized = false;\n    this.outputAudioElement = null;\n\n    // Configuration\n    this.masterVolume = config.masterVolume || 0.8;\n    this.sampleRate = config.sampleRate || 48000;\n    this.bufferSize = config.bufferSize || 256;\n    this.enableEchoCancellation = config.enableEchoCancellation !== false;\n    this.debug = config.debug || false;\n  }\n\n  /**\n   * Initialize the audio mixer\n   */\n  async initialize() {\n    if (this.isInitialized) {\n      this._debug(\"AudioMixer already initialized\");\n      return;\n    }\n\n    try {\n      // Create shared AudioContext\n      this.audioContext = new (window.AudioContext ||\n        window.webkitAudioContext)({\n        sampleRate: this.sampleRate,\n        latencyHint: \"interactive\",\n      });\n\n      // Resume context if suspended (required by some browsers)\n      if (this.audioContext.state === \"suspended\") {\n        await this.audioContext.resume();\n      }\n\n      // Create mixer node (GainNode to combine audio)\n      this.mixerNode = this.audioContext.createGain();\n      this.mixerNode.gain.value = this.masterVolume;\n\n      // Create output destination\n      this.outputDestination = this.audioContext.createMediaStreamDestination();\n      this.mixerNode.connect(this.outputDestination);\n\n      // Create hidden audio element for mixed audio playback\n      this.outputAudioElement = document.createElement(\"audio\");\n      this.outputAudioElement.autoplay = true;\n      this.outputAudioElement.style.display = \"none\";\n      this.outputAudioElement.setAttribute(\"playsinline\", \"\");\n\n      // Disable echo cancellation on output element\n      if (this.enableEchoCancellation) {\n        this.outputAudioElement.setAttribute(\"webkitAudioContext\", \"true\");\n      }\n\n      document.body.appendChild(this.outputAudioElement);\n\n      this.isInitialized = true;\n      this._debug(\"AudioMixer initialized successfully\");\n\n      // Setup error handlers\n      this._setupErrorHandlers();\n    } catch (error) {\n      console.error(\"Failed to initialize AudioMixer:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * Add a subscriber's audio stream to the mixer\n   */\n  async addSubscriber(\n    subscriberId,\n    audioWorkletUrl,\n    isOwnAudio = false,\n    channelWorkletPort\n  ) {\n    console.warn(`Adding subscriber ${subscriberId} to audio mixer`);\n    if (!this.isInitialized) {\n      await this.initialize();\n    }\n\n    // Skip adding own audio to prevent echo/feedback\n    if (isOwnAudio) {\n      this._debug(\n        `Skipping own audio for subscriber ${subscriberId} to prevent echo`\n      );\n      return null;\n    }\n\n    // Check if subscriber already exists\n    if (this.subscriberNodes.has(subscriberId)) {\n      this._debug(`Subscriber ${subscriberId} already exists in mixer`);\n      return this.subscriberNodes.get(subscriberId);\n    }\n\n    try {\n      // Load audio worklet if not already loaded\n      await this._loadAudioWorklet(audioWorkletUrl);\n\n      // Create AudioWorkletNode for this subscriber\n      const workletNode = new AudioWorkletNode(\n        this.audioContext,\n        \"jitter-resistant-processor\",\n        {\n          numberOfInputs: 0,\n          numberOfOutputs: 1,\n          outputChannelCount: [2],\n        }\n      );\n\n      // Connect the port if provided\n      if (channelWorkletPort) {\n        workletNode.port.postMessage(\n          { type: \"connectWorker\", port: channelWorkletPort },\n          [channelWorkletPort]\n        );\n      }\n\n      // Create gain node for individual volume control\n      const gainNode = this.audioContext.createGain();\n      gainNode.gain.value = 1.0;\n\n      // Connect: workletNode -> gainNode -> mixerNode\n      workletNode.connect(gainNode);\n      gainNode.connect(this.mixerNode);\n\n      // Store reference with gain node\n      this.subscriberNodes.set(subscriberId, {\n        workletNode,\n        gainNode,\n        isActive: true,\n        addedAt: Date.now(),\n      });\n\n      // Update audio element source with mixed stream\n      this._updateOutputAudio();\n\n      // Setup message handler\n      this._setupWorkletMessageHandler(subscriberId, workletNode);\n\n      this._debug(`Added subscriber ${subscriberId} to audio mixer`);\n      return workletNode;\n    } catch (error) {\n      console.error(\n        `Failed to add subscriber ${subscriberId} to mixer:`,\n        error\n      );\n      throw error;\n    }\n  }\n\n  /**\n   * Remove a subscriber from the mixer\n   */\n  removeSubscriber(subscriberId) {\n    const subscriberData = this.subscriberNodes.get(subscriberId);\n    if (!subscriberData) {\n      this._debug(`Subscriber ${subscriberId} not found in mixer`);\n      return false;\n    }\n\n    try {\n      const { workletNode, gainNode } = subscriberData;\n\n      // Disconnect nodes\n      workletNode.disconnect();\n      gainNode.disconnect();\n\n      // Remove from map\n      this.subscriberNodes.delete(subscriberId);\n\n      // Update audio element if no more subscribers\n      this._updateOutputAudio();\n\n      this._debug(`Removed subscriber ${subscriberId} from audio mixer`);\n      return true;\n    } catch (error) {\n      console.error(`Failed to remove subscriber ${subscriberId}:`, error);\n      return false;\n    }\n  }\n\n  /**\n   * Set volume for a specific subscriber\n   */\n  setSubscriberVolume(subscriberId, volume) {\n    const subscriberData = this.subscriberNodes.get(subscriberId);\n    if (!subscriberData) {\n      this._debug(`Subscriber ${subscriberId} not found for volume adjustment`);\n      return false;\n    }\n\n    try {\n      const normalizedVolume = Math.max(0, Math.min(1, volume));\n      subscriberData.gainNode.gain.value = normalizedVolume;\n\n      this._debug(\n        `Set volume for subscriber ${subscriberId}: ${normalizedVolume}`\n      );\n      return true;\n    } catch (error) {\n      console.error(\n        `Failed to set volume for subscriber ${subscriberId}:`,\n        error\n      );\n      return false;\n    }\n  }\n\n  /**\n   * Mute/unmute a specific subscriber\n   */\n  setSubscriberMuted(subscriberId, muted) {\n    return this.setSubscriberVolume(subscriberId, muted ? 0 : 1);\n  }\n\n  /**\n   * Set master volume for all mixed audio\n   */\n  setMasterVolume(volume) {\n    if (!this.mixerNode) return false;\n\n    try {\n      const normalizedVolume = Math.max(0, Math.min(1, volume));\n      this.mixerNode.gain.value = normalizedVolume;\n      this.masterVolume = normalizedVolume;\n\n      this._debug(`Set master volume: ${normalizedVolume}`);\n      return true;\n    } catch (error) {\n      console.error(\"Failed to set master volume:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Get mixed audio output stream\n   */\n  getOutputMediaStream() {\n    if (!this.outputDestination) {\n      this._debug(\"Output destination not initialized\");\n      return null;\n    }\n    return this.outputDestination.stream;\n  }\n\n  /**\n   * Get current mixer statistics\n   */\n  getStats() {\n    return {\n      isInitialized: this.isInitialized,\n      subscriberCount: this.subscriberNodes.size,\n      masterVolume: this.masterVolume,\n      audioContextState: this.audioContext?.state || \"not-initialized\",\n      sampleRate: this.audioContext?.sampleRate || 0,\n      subscribers: Array.from(this.subscriberNodes.entries()).map(\n        ([id, data]) => ({\n          id,\n          volume: data.gainNode.gain.value,\n          isActive: data.isActive,\n          addedAt: data.addedAt,\n        })\n      ),\n    };\n  }\n\n  /**\n   * Get list of subscriber IDs\n   */\n  getSubscriberIds() {\n    return Array.from(this.subscriberNodes.keys());\n  }\n\n  /**\n   * Check if subscriber exists in mixer\n   */\n  hasSubscriber(subscriberId) {\n    return this.subscriberNodes.has(subscriberId);\n  }\n\n  /**\n   * Suspend audio context (for battery saving)\n   */\n  async suspend() {\n    if (this.audioContext && this.audioContext.state === \"running\") {\n      await this.audioContext.suspend();\n      this._debug(\"Audio context suspended\");\n    }\n  }\n\n  /**\n   * Resume audio context\n   */\n  async resume() {\n    if (this.audioContext && this.audioContext.state === \"suspended\") {\n      await this.audioContext.resume();\n      this._debug(\"Audio context resumed\");\n    }\n  }\n\n  /**\n   * Cleanup mixer resources\n   */\n  async cleanup() {\n    this._debug(\"Starting AudioMixer cleanup\");\n\n    try {\n      // Remove audio element\n      if (this.outputAudioElement) {\n        this.outputAudioElement.srcObject = null;\n        if (this.outputAudioElement.parentNode) {\n          this.outputAudioElement.parentNode.removeChild(\n            this.outputAudioElement\n          );\n        }\n        this.outputAudioElement = null;\n      }\n\n      // Disconnect all subscribers\n      for (const [subscriberId, subscriberData] of this.subscriberNodes) {\n        try {\n          const { workletNode, gainNode } = subscriberData;\n          workletNode.disconnect();\n          gainNode.disconnect();\n        } catch (error) {\n          console.error(\n            `Error disconnecting subscriber ${subscriberId}:`,\n            error\n          );\n        }\n      }\n      this.subscriberNodes.clear();\n\n      // Disconnect mixer components\n      if (this.mixerNode) {\n        this.mixerNode.disconnect();\n        this.mixerNode = null;\n      }\n\n      if (this.outputDestination) {\n        this.outputDestination = null;\n      }\n\n      // Close audio context\n      if (this.audioContext && this.audioContext.state !== \"closed\") {\n        await this.audioContext.close();\n      }\n\n      // Reset state\n      this.audioContext = null;\n      this.isInitialized = false;\n\n      this._debug(\"AudioMixer cleanup completed\");\n    } catch (error) {\n      console.error(\"Error during AudioMixer cleanup:\", error);\n    }\n  }\n\n  /**\n   * Load audio worklet module\n   */\n  async _loadAudioWorklet(audioWorkletUrl) {\n    console.warn(\"Loading audio worklet from:\", audioWorkletUrl);\n    try {\n      await this.audioContext.audioWorklet.addModule(audioWorkletUrl);\n      this._debug(\"Audio worklet loaded:\", audioWorkletUrl);\n    } catch (error) {\n      // Worklet might already be loaded\n      if (!error.message.includes(\"already been loaded\")) {\n        this._debug(\"Audio worklet load warning:\", error.message);\n      }\n    }\n  }\n\n  /**\n   * Update output audio element\n   */\n  _updateOutputAudio() {\n    if (!this.outputAudioElement || !this.outputDestination) return;\n\n    try {\n      if (this.subscriberNodes.size > 0) {\n        this.outputAudioElement.srcObject = this.outputDestination.stream;\n      } else {\n        this.outputAudioElement.srcObject = null;\n      }\n    } catch (error) {\n      console.error(\"Failed to update output audio:\", error);\n    }\n  }\n\n  /**\n   * Setup message handler for worklet node\n   */\n  _setupWorkletMessageHandler(subscriberId, workletNode) {\n    workletNode.port.onmessage = (event) => {\n      const { type, bufferMs, isPlaying, newBufferSize, error } = event.data;\n\n      switch (type) {\n        case \"bufferStatus\":\n          this._debug(\n            `Subscriber ${subscriberId} buffer: ${bufferMs}ms, playing: ${isPlaying}`\n          );\n          break;\n        case \"bufferSizeChanged\":\n          this._debug(\n            `Subscriber ${subscriberId} buffer size changed: ${newBufferSize}`\n          );\n          break;\n        case \"error\":\n          console.error(`Subscriber ${subscriberId} worklet error:`, error);\n          break;\n        default:\n          this._debug(\n            `Subscriber ${subscriberId} worklet message:`,\n            event.data\n          );\n      }\n    };\n\n    workletNode.port.onerror = (error) => {\n      console.error(`Subscriber ${subscriberId} worklet port error:`, error);\n    };\n  }\n\n  /**\n   * Setup error handlers for audio context\n   */\n  _setupErrorHandlers() {\n    if (!this.audioContext) return;\n\n    this.audioContext.onstatechange = () => {\n      this._debug(`Audio context state changed: ${this.audioContext.state}`);\n\n      if (this.audioContext.state === \"interrupted\") {\n        console.warn(\"Audio context was interrupted\");\n      }\n    };\n\n    // Listen for audio context suspend/resume events\n    document.addEventListener(\"visibilitychange\", async () => {\n      if (document.hidden) {\n        // Page hidden - optionally suspend context\n        // await this.suspend();\n      } else {\n        // Page visible - resume context if needed\n        await this.resume();\n      }\n    });\n  }\n\n  /**\n   * Debug logging\n   */\n  _debug(...args) {\n    if (this.debug) {\n      console.log(\"[AudioMixer]\", ...args);\n    }\n  }\n\n  /**\n   * Sleep utility for delays\n   */\n  _sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n}\n\nexport default AudioMixer;\n","import EventEmitter from \"../events/EventEmitter.js\";\nimport Participant from \"./Participant.js\";\n\nimport Publisher from \"../media/Publisher.js\";\nimport Subscriber from \"../media/Subscriber.js\";\nimport AudioMixer from \"../media/AudioMixer.js\";\n\n/**\n * Represents a meeting room\n */\nclass Room extends EventEmitter {\n  constructor(config) {\n    super();\n\n    this.id = config.id;\n    this.name = config.name;\n    this.code = config.code;\n    this.type = config.type || \"main\"; // 'main', 'breakout'\n    this.parentRoomId = config.parentRoomId || null;\n    this.ownerId = config.ownerId;\n    this.isActive = false;\n\n    // Configuration\n    this.apiClient = config.apiClient;\n    this.mediaConfig = config.mediaConfig;\n\n    // Participants management\n    this.participants = new Map(); // userId -> Participant\n    this.localParticipant = null;\n\n    // Sub rooms (for main rooms only)\n    this.subRooms = new Map(); // subRoomId -> Room\n\n    // Media management\n    this.audioMixer = null;\n    this.pinnedParticipant = null;\n\n    // Connection info\n    this.membershipId = null;\n    this.streamId = null;\n\n    // Chat management\n    this.messages = [];\n    this.typingUsers = new Map();\n  }\n\n  /**\n   * Join this room\n   */\n  async join(userId) {\n    if (this.isActive) {\n      throw new Error(\"Already joined this room\");\n    }\n\n    try {\n      this.emit(\"joining\", { room: this });\n      console.log(\"Joining room with code\", this.code);\n      // Join via API\n      const joinResponse = await this.apiClient.joinRoom(this.code);\n\n      // Store connection info\n      this.id = joinResponse.room_id;\n      this.membershipId = joinResponse.id;\n      this.streamId = joinResponse.stream_id;\n\n      // Get room details and members\n      const roomDetails = await this.apiClient.getRoomById(\n        joinResponse.room_id\n      );\n      console.log(\"Joined room, details:\", roomDetails);\n\n      // Update room info\n      this._updateFromApiData(roomDetails.room);\n\n      // Setup participants\n      await this._setupParticipants(roomDetails.participants, userId);\n\n      // Setup media connections\n      await this._setupMediaConnections();\n\n      this.isActive = true;\n      this.emit(\"joined\", { room: this, participants: this.participants });\n\n      return {\n        room: this,\n        localParticipant: this.localParticipant,\n        participants: Array.from(this.participants.values()),\n      };\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"join\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Leave this room\n   */\n  async leave() {\n    if (!this.isActive) {\n      return;\n    }\n\n    try {\n      this.emit(\"leaving\", { room: this });\n\n      // Cleanup media connections\n      await this._cleanupMediaConnections();\n\n      // Cleanup participants\n      this._cleanupParticipants();\n\n      // Leave via API\n      if (this.membershipId) {\n        await this.apiClient.leaveRoom(this.id, this.membershipId);\n      }\n\n      this.isActive = false;\n      this.emit(\"left\", { room: this });\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"leave\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a sub room (main room only)\n   */\n  async createSubRoom(config) {\n    if (this.type !== \"main\") {\n      throw new Error(\"Only main rooms can create sub rooms\");\n    }\n\n    try {\n      this.emit(\"creatingSubRoom\", { room: this, config });\n\n      // Create sub room via API\n      const subRoomData = await this.apiClient.createSubRoom(\n        this.id,\n        config.name,\n        config.type || \"breakout\"\n      );\n\n      // Create sub room instance\n      const subRoom = new Room({\n        id: subRoomData.id,\n        name: subRoomData.room_name,\n        code: subRoomData.room_code,\n        type: config.type || \"breakout\",\n        parentRoomId: this.id,\n        ownerId: subRoomData.user_id,\n        apiClient: this.apiClient,\n        mediaConfig: this.mediaConfig,\n      });\n\n      // Store sub room\n      this.subRooms.set(subRoom.id, subRoom);\n\n      this.emit(\"subRoomCreated\", { room: this, subRoom });\n\n      return subRoom;\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"createSubRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Get all sub rooms\n   */\n  async getSubRooms() {\n    if (this.type !== \"main\") {\n      return [];\n    }\n\n    try {\n      const subRoomsData = await this.apiClient.getSubRooms(this.id);\n\n      // Update local sub rooms map\n      for (const subRoomData of subRoomsData) {\n        if (!this.subRooms.has(subRoomData.id)) {\n          const subRoom = new Room({\n            id: subRoomData.id,\n            name: subRoomData.room_name,\n            code: subRoomData.room_code,\n            type: subRoomData.room_type,\n            parentRoomId: this.id,\n            ownerId: subRoomData.user_id,\n            apiClient: this.apiClient,\n            mediaConfig: this.mediaConfig,\n          });\n\n          this.subRooms.set(subRoom.id, subRoom);\n        }\n      }\n\n      return Array.from(this.subRooms.values());\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"getSubRooms\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Switch to a sub room\n   */\n  async switchToSubRoom(subRoomCode) {\n    try {\n      this.emit(\"switchingToSubRoom\", { room: this, subRoomCode });\n\n      // Switch via API\n      const switchResponse = await this.apiClient.switchToSubRoom(\n        this.id,\n        subRoomCode\n      );\n\n      // Cleanup current media connections but keep participants\n      await this._cleanupMediaConnections();\n\n      // Update connection info for new sub room\n      this.membershipId = switchResponse.id;\n      this.streamId = switchResponse.stream_id;\n\n      // Setup media connections for sub room\n      await this._setupMediaConnections();\n\n      this.emit(\"switchedToSubRoom\", {\n        room: this,\n        subRoomCode,\n        response: switchResponse,\n      });\n\n      return switchResponse;\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"switchToSubRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Return to main room from sub room\n   */\n  async returnToMainRoom() {\n    if (!this.parentRoomId) {\n      throw new Error(\"This is not a sub room\");\n    }\n\n    try {\n      this.emit(\"returningToMainRoom\", { room: this });\n\n      // Leave current sub room\n      await this.leave();\n\n      // The parent should handle rejoining main room\n      this.emit(\"returnedToMainRoom\", { room: this });\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"returnToMainRoom\" });\n      throw error;\n    }\n  }\n\n  async sendMessage(text, metadata = {}) {\n    if (!this.isActive) {\n      throw new Error(\"Cannot send message: room is not active\");\n    }\n\n    if (!this.localParticipant?.publisher) {\n      throw new Error(\"Cannot send message: publisher not available\");\n    }\n\n    if (!text || typeof text !== \"string\" || text.trim().length === 0) {\n      throw new Error(\"Message text is required and must be a non-empty string\");\n    }\n\n    try {\n      const messageId = this._generateMessageId();\n      const message = {\n        id: messageId,\n        text: text.trim(),\n        senderId: this.localParticipant.userId,\n        senderName: metadata.senderName || this.localParticipant.userId,\n        roomId: this.id,\n        timestamp: Date.now(),\n        metadata: metadata.customData || {},\n      };\n\n      const messageEvent = {\n        type: \"message\",\n        ...message,\n      };\n\n      await this.localParticipant.publisher.sendEvent(messageEvent);\n\n      this.messages.push(message);\n\n      this.emit(\"messageSent\", {\n        room: this,\n        message,\n      });\n\n      return message;\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"sendMessage\" });\n      throw error;\n    }\n  }\n\n  async deleteMessage(messageId) {\n    if (!this.isActive) {\n      throw new Error(\"Cannot delete message: room is not active\");\n    }\n\n    if (!this.localParticipant?.publisher) {\n      throw new Error(\"Cannot delete message: publisher not available\");\n    }\n\n    try {\n      const deleteEvent = {\n        type: \"messageDelete\",\n        messageId,\n        senderId: this.localParticipant.userId,\n        roomId: this.id,\n        timestamp: Date.now(),\n      };\n\n      await this.localParticipant.publisher.sendEvent(deleteEvent);\n\n      this.messages = this.messages.filter((m) => m.id !== messageId);\n\n      this.emit(\"messageDeleted\", {\n        room: this,\n        messageId,\n      });\n\n      return true;\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"deleteMessage\" });\n      throw error;\n    }\n  }\n\n  async updateMessage(messageId, newText, metadata = {}) {\n    if (!this.isActive) {\n      throw new Error(\"Cannot update message: room is not active\");\n    }\n\n    if (!this.localParticipant?.publisher) {\n      throw new Error(\"Cannot update message: publisher not available\");\n    }\n\n    if (!newText || typeof newText !== \"string\" || newText.trim().length === 0) {\n      throw new Error(\"New message text is required and must be a non-empty string\");\n    }\n\n    try {\n      const updateEvent = {\n        type: \"messageUpdate\",\n        messageId,\n        text: newText.trim(),\n        senderId: this.localParticipant.userId,\n        roomId: this.id,\n        timestamp: Date.now(),\n        metadata: metadata.customData || {},\n      };\n\n      await this.localParticipant.publisher.sendEvent(updateEvent);\n\n      const messageIndex = this.messages.findIndex((m) => m.id === messageId);\n      if (messageIndex !== -1) {\n        this.messages[messageIndex].text = newText.trim();\n        this.messages[messageIndex].updatedAt = Date.now();\n        this.messages[messageIndex].metadata = {\n          ...this.messages[messageIndex].metadata,\n          ...updateEvent.metadata,\n        };\n      }\n\n      this.emit(\"messageUpdated\", {\n        room: this,\n        messageId,\n        text: newText.trim(),\n      });\n\n      return true;\n    } catch (error) {\n      this.emit(\"error\", { room: this, error, action: \"updateMessage\" });\n      throw error;\n    }\n  }\n\n  async sendTypingIndicator(isTyping = true) {\n    if (!this.isActive) {\n      return;\n    }\n\n    if (!this.localParticipant?.publisher) {\n      return;\n    }\n\n    try {\n      const typingEvent = {\n        type: isTyping ? \"typingStart\" : \"typingStop\",\n        userId: this.localParticipant.userId,\n        roomId: this.id,\n        timestamp: Date.now(),\n      };\n\n      await this.localParticipant.publisher.sendEvent(typingEvent);\n    } catch (error) {\n      console.error(\"Failed to send typing indicator:\", error);\n    }\n  }\n\n  getMessages(limit = 100) {\n    return this.messages.slice(-limit);\n  }\n\n  getTypingUsers() {\n    return Array.from(this.typingUsers.values());\n  }\n\n  clearMessages() {\n    this.messages = [];\n  }\n\n  /**\n   * Add a participant to the room\n   */\n  addParticipant(memberData, userId) {\n    const isLocal = memberData.user_id === userId;\n\n    const participant = new Participant({\n      userId: memberData.user_id,\n      streamId: memberData.stream_id,\n      membershipId: memberData.id,\n      role: memberData.role,\n      roomId: this.id,\n      isLocal,\n    });\n\n    // Setup participant events\n    this._setupParticipantEvents(participant);\n\n    this.participants.set(participant.userId, participant);\n\n    if (isLocal) {\n      this.localParticipant = participant;\n    }\n\n    this.emit(\"participantAdded\", { room: this, participant });\n\n    return participant;\n  }\n\n  /**\n   * Remove a participant from the room\n   */\n  removeParticipant(userId) {\n    const participant = this.participants.get(userId);\n    if (!participant) return null;\n\n    // Cleanup participant\n    participant.cleanup();\n\n    // Remove from maps\n    this.participants.delete(userId);\n\n    if (this.localParticipant?.userId === userId) {\n      this.localParticipant = null;\n    }\n\n    if (this.pinnedParticipant?.userId === userId) {\n      this.pinnedParticipant = null;\n    }\n\n    this.emit(\"participantRemoved\", { room: this, participant });\n\n    return participant;\n  }\n\n  /**\n   * Get a participant by user ID\n   */\n  getParticipant(userId) {\n    return this.participants.get(userId);\n  }\n\n  /**\n   * Get all participants\n   */\n  getParticipants() {\n    return Array.from(this.participants.values());\n  }\n\n  /**\n   * Pin a participant's video\n   */\n  // pinParticipant(userId) {\n  //   const participant = this.participants.get(userId);\n  //   if (!participant) return false;\n\n  //   // Unpin current participant\n  //   if (this.pinnedParticipant) {\n  //     this.pinnedParticipant.isPinned = false;\n  //   }\n\n  //   // Pin new participant\n  //   participant.isPinned = true;\n  //   this.pinnedParticipant = participant;\n\n  //   this.emit(\"participantPinned\", { room: this, participant });\n\n  //   return true;\n  // }\n\n  pinParticipant(userId) {\n    const participant = this.participants.get(userId);\n    if (!participant) return false;\n\n    // Unpin current participant và move về sidebar\n    if (this.pinnedParticipant && this.pinnedParticipant !== participant) {\n      this.pinnedParticipant.isPinned = false;\n    }\n\n    // Pin new participant và move lên main\n    participant.isPinned = true;\n    this.pinnedParticipant = participant;\n\n    this.emit(\"participantPinned\", { room: this, participant });\n\n    return true;\n  }\n\n  /**\n   * Unpin currently pinned participant\n   */\n  // unpinParticipant() {\n  //   if (!this.pinnedParticipant) return false;\n\n  //   this.pinnedParticipant.isPinned = false;\n  //   const unpinnedParticipant = this.pinnedParticipant;\n  //   this.pinnedParticipant = null;\n\n  //   this.emit(\"participantUnpinned\", {\n  //     room: this,\n  //     participant: unpinnedParticipant,\n  //   });\n\n  //   return true;\n  // }\n\n  unpinParticipant() {\n    if (!this.pinnedParticipant) return false;\n\n    this.pinnedParticipant.isPinned = false;\n    const unpinnedParticipant = this.pinnedParticipant;\n\n    this.pinnedParticipant = null;\n\n    // Auto-pin local participant nếu có\n    if (this.localParticipant) {\n      this.pinParticipant(this.localParticipant.userId);\n    }\n\n    this.emit(\"participantUnpinned\", {\n      room: this,\n      participant: unpinnedParticipant,\n    });\n\n    return true;\n  }\n\n  /**\n   * Get room info\n   */\n  getInfo() {\n    return {\n      id: this.id,\n      name: this.name,\n      code: this.code,\n      type: this.type,\n      parentRoomId: this.parentRoomId,\n      ownerId: this.ownerId,\n      isActive: this.isActive,\n      participantCount: this.participants.size,\n      subRoomCount: this.subRooms.size,\n      pinnedParticipant: this.pinnedParticipant?.userId || null,\n    };\n  }\n\n  /**\n   * Setup participants from API data\n   */\n  async _setupParticipants(participantsData, userId) {\n    for (const participantData of participantsData) {\n      this.addParticipant(participantData, userId);\n    }\n  }\n\n  /**\n   * Setup media connections for all participants\n   */\n  async _setupMediaConnections() {\n    // Initialize audio mixer\n    if (!this.audioMixer) {\n      this.audioMixer = new AudioMixer();\n      await this.audioMixer.initialize();\n    }\n\n    // Setup publisher for local participant\n    if (this.localParticipant) {\n      await this._setupLocalPublisher();\n    }\n\n    // Setup subscribers for remote participants\n    for (const participant of this.participants.values()) {\n      if (!participant.isLocal) {\n        await this._setupRemoteSubscriber(participant);\n      }\n    }\n\n    // Setup stream event forwarding\n    this._setupStreamEventForwarding();\n  }\n\n  /**\n   * Setup publisher for local participant\n   */\n  async _setupLocalPublisher() {\n    if (!this.localParticipant || !this.streamId) return;\n\n    // Video rendering handled by app through stream events\n\n    const publishUrl = `${this.mediaConfig.webtpUrl}/${this.id}/${this.streamId}`;\n    console.log(\"trying to connect webtransport to\", publishUrl);\n\n    const publisher = new Publisher({\n      publishUrl,\n      streamType: \"camera\",\n      streamId: this.streamId,\n      width: 1280,\n      height: 720,\n      framerate: 30,\n      bitrate: 1_500_000,\n      onStatusUpdate: (msg, isError) => {\n        this.localParticipant.setConnectionStatus(\n          isError ? \"failed\" : \"connected\"\n        );\n      },\n      onServerEvent: async (event) => {\n        await this._handleServerEvent(event);\n      },\n    });\n\n    // Setup stream event forwarding\n    publisher.on(\"localStreamReady\", (data) => {\n      this.emit(\"localStreamReady\", {\n        ...data,\n        participant: this.localParticipant.getInfo(),\n        roomId: this.id,\n      });\n    });\n\n    await publisher.startPublishing();\n    this.localParticipant.setPublisher(publisher);\n  }\n\n  /**\n   * Setup subscriber for remote participant\n   */\n  async _setupRemoteSubscriber(participant) {\n    const subscriber = new Subscriber({\n      streamId: participant.streamId,\n      roomId: this.id,\n      host: this.mediaConfig.host,\n      streamOutputEnabled: true,\n      onStatus: (msg, isError) => {\n        participant.setConnectionStatus(isError ? \"failed\" : \"connected\");\n      },\n      audioWorkletUrl: \"workers/audio-worklet1.js\",\n      mstgPolyfillUrl: \"polyfills/MSTG_polyfill.js\",\n    });\n    // Add to audio mixer\n    if (this.audioMixer) {\n      subscriber.setAudioMixer(this.audioMixer);\n    }\n\n    // Setup stream event forwarding\n    subscriber.on(\"remoteStreamReady\", (data) => {\n      this.emit(\"remoteStreamReady\", {\n        ...data,\n        participant: participant.getInfo(),\n        roomId: this.id,\n      });\n    });\n\n    // subscriber.on(\"streamRemoved\", (data) => {\n    //   this.emit(\"streamRemoved\", {\n    //     ...data,\n    //     participant: participant.getInfo(),\n    //     roomId: this.id\n    //   });\n    // });\n\n    await subscriber.start();\n    participant.setSubscriber(subscriber);\n  }\n\n  /**\n   * Handle server events from publisher\n   */\n  async _handleServerEvent(event) {\n    console.log(\"-----Received server event----\", event);\n    if (event.type === \"join\") {\n      const joinedParticipant = event.participant;\n      if (joinedParticipant.user_id === this.localParticipant?.userId) return;\n\n      const participant = this.addParticipant(\n        {\n          user_id: joinedParticipant.user_id,\n          stream_id: joinedParticipant.stream_id,\n          id: joinedParticipant.membership_id,\n          role: joinedParticipant.role,\n        },\n        this.localParticipant?.userId\n      );\n\n      await this._setupRemoteSubscriber(participant);\n    }\n\n    if (event.type === \"leave\") {\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant) {\n        this.removeParticipant(event.participant.user_id);\n\n        if (!this.pinnedParticipant && this.localParticipant) {\n          this.pinParticipant(this.localParticipant.userId);\n        }\n      }\n    }\n\n    if (event.type === \"message\") {\n      const message = {\n        id: event.id,\n        text: event.text,\n        senderId: event.senderId,\n        senderName: event.senderName,\n        roomId: event.roomId,\n        timestamp: event.timestamp,\n        metadata: event.metadata || {},\n      };\n\n      this.messages.push(message);\n\n      const sender = this.getParticipant(event.senderId);\n\n      this.emit(\"messageReceived\", {\n        room: this,\n        message,\n        sender: sender ? sender.getInfo() : null,\n      });\n    }\n\n    if (event.type === \"messageDelete\") {\n      this.messages = this.messages.filter((m) => m.id !== event.messageId);\n\n      this.emit(\"messageDeleted\", {\n        room: this,\n        messageId: event.messageId,\n        senderId: event.senderId,\n      });\n    }\n\n    if (event.type === \"messageUpdate\") {\n      const messageIndex = this.messages.findIndex((m) => m.id === event.messageId);\n      if (messageIndex !== -1) {\n        this.messages[messageIndex].text = event.text;\n        this.messages[messageIndex].updatedAt = event.timestamp;\n        this.messages[messageIndex].metadata = {\n          ...this.messages[messageIndex].metadata,\n          ...event.metadata,\n        };\n      }\n\n      this.emit(\"messageUpdated\", {\n        room: this,\n        messageId: event.messageId,\n        text: event.text,\n        senderId: event.senderId,\n      });\n    }\n\n    if (event.type === \"typingStart\") {\n      if (event.userId !== this.localParticipant?.userId) {\n        this.typingUsers.set(event.userId, {\n          userId: event.userId,\n          timestamp: event.timestamp,\n        });\n\n        this.emit(\"typingStarted\", {\n          room: this,\n          userId: event.userId,\n          user: this.getParticipant(event.userId)?.getInfo(),\n        });\n\n        setTimeout(() => {\n          this.typingUsers.delete(event.userId);\n          this.emit(\"typingStopped\", {\n            room: this,\n            userId: event.userId,\n          });\n        }, 5000);\n      }\n    }\n\n    if (event.type === \"typingStop\") {\n      if (event.userId !== this.localParticipant?.userId) {\n        this.typingUsers.delete(event.userId);\n\n        this.emit(\"typingStopped\", {\n          room: this,\n          userId: event.userId,\n          user: this.getParticipant(event.userId)?.getInfo(),\n        });\n      }\n    }\n    if (event.type === \"start_share_screen\") {\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant && participant.userId !== this.localParticipant?.userId) {\n        participant.isScreenSharing = true;\n        this.emit(\"remoteScreenShareStarted\", { room: this, participant });\n      }\n    }\n\n    if (event.type === \"stop_share_screen\") {\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant && participant.userId !== this.localParticipant?.userId) {\n        participant.isScreenSharing = false;\n        this.emit(\"remoteScreenShareStopped\", { room: this, participant });\n      }\n    }\n\n    if (event.type === \"mic_on\") {\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant) {\n        participant.updateMicStatus(true);\n        this.emit(\"remoteAudioStatusChanged\", {\n          room: this,\n          participant,\n          enabled: true,\n        });\n      }\n    }\n\n    if (event.type === \"mic_off\") {\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant) {\n        participant.updateMicStatus(false);\n        this.emit(\"remoteAudioStatusChanged\", {\n          room: this,\n          participant,\n          enabled: false,\n        });\n      }\n    }\n\n    if (event.type === \"camera_on\") {\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant) {\n        participant.updateCameraStatus(true);\n        this.emit(\"remoteVideoStatusChanged\", {\n          room: this,\n          participant,\n          enabled: true,\n        });\n      }\n    }\n\n    if (event.type === \"camera_off\") {\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant) {\n        participant.updateCameraStatus(false);\n        this.emit(\"remoteVideoStatusChanged\", {\n          room: this,\n          participant,\n          enabled: false,\n        });\n      }\n    }\n\n    if (event.type === \"pin_for_everyone\") {\n      console.log(`Pin for everyone event received:`, event.participant);\n      const participant = this.participants.get(event.participant.user_id);\n      if (participant) {\n        this.pinParticipant(participant.userId);\n        this.emit(\"participantPinnedForEveryone\", { room: this, participant });\n      }\n    }\n\n    if (event.type === \"unpin_for_everyone\") {\n      console.log(`Unpin for everyone event received`);\n      if (this.pinnedParticipant) {\n        const participant = this.pinnedParticipant;\n        this.unpinParticipant();\n        this.emit(\"participantUnpinnedForEveryone\", {\n          room: this,\n          participant,\n        });\n      }\n    }\n  }\n\n  _setupParticipantEvents(participant) {\n    participant.on(\"pinToggled\", ({ participant: p, pinned }) => {\n      if (pinned) {\n        this.pinParticipant(p.userId);\n      } else if (this.pinnedParticipant === p) {\n        this.unpinParticipant();\n      }\n    });\n\n    participant.on(\"error\", ({ participant: p, error, action }) => {\n      this.emit(\"participantError\", {\n        room: this,\n        participant: p,\n        error,\n        action,\n      });\n    });\n  }\n\n  /**\n   * Update room data from API response\n   */\n  _updateFromApiData(roomData) {\n    this.name = roomData.room_name || this.name;\n    this.ownerId = roomData.user_id || this.ownerId;\n  }\n\n  /**\n   * Cleanup media connections\n   */\n  async _cleanupMediaConnections() {\n    // Cleanup audio mixer\n    if (this.audioMixer) {\n      await this.audioMixer.cleanup();\n      this.audioMixer = null;\n    }\n\n    // Cleanup all participants' media\n    for (const participant of this.participants.values()) {\n      if (participant.publisher) {\n        participant.publisher.stop();\n        participant.publisher = null;\n      }\n      if (participant.subscriber) {\n        participant.subscriber.stop();\n        participant.subscriber = null;\n      }\n    }\n  }\n\n  /**\n   * Cleanup all participants\n   */\n  _cleanupParticipants() {\n    for (const participant of this.participants.values()) {\n      participant.cleanup();\n    }\n\n    this.participants.clear();\n    this.localParticipant = null;\n    this.pinnedParticipant = null;\n    this.typingUsers.clear();\n  }\n\n  _generateMessageId() {\n    return `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  /**\n   * Setup stream event forwarding for existing participants\n   */\n  _setupStreamEventForwarding() {\n    // Setup for local participant if exists\n    if (this.localParticipant && this.localParticipant.publisher) {\n      this.localParticipant.publisher.on(\"localStreamReady\", (data) => {\n        this.emit(\"localStreamReady\", {\n          ...data,\n          participant: this.localParticipant.getInfo(),\n          roomId: this.id,\n        });\n      });\n    }\n\n    // Setup for remote participants\n    for (const participant of this.participants.values()) {\n      if (participant.subscriber && !participant.isLocal) {\n        participant.subscriber.on(\"remoteStreamReady\", (data) => {\n          this.emit(\"remoteStreamReady\", {\n            ...data,\n            participant: participant.getInfo(),\n            roomId: this.id,\n          });\n        });\n\n        // participant.subscriber.on(\"streamRemoved\", (data) => {\n        //   this.emit(\"streamRemoved\", {\n        //     ...data,\n        //     participant: participant.getInfo(),\n        //     roomId: this.id\n        //   });\n        // });\n      }\n    }\n  }\n\n  /**\n   * Remove stream event forwarding\n   */\n  _removeStreamEventForwarding() {\n    // Remove local participant events\n    if (this.localParticipant && this.localParticipant.publisher) {\n      this.localParticipant.publisher.removeAllListeners(\"localStreamReady\");\n    }\n\n    // Remove remote participants events\n    for (const participant of this.participants.values()) {\n      if (participant.subscriber && !participant.isLocal) {\n        participant.subscriber.removeAllListeners(\"remoteStreamReady\");\n        participant.subscriber.removeAllListeners(\"streamRemoved\");\n      }\n    }\n  }\n\n  /**\n   * Cleanup room resources\n   */\n  async cleanup() {\n    if (this.isActive) {\n      await this.leave();\n    }\n\n    // Cleanup sub rooms\n    for (const subRoom of this.subRooms.values()) {\n      await subRoom.cleanup();\n    }\n    this.subRooms.clear();\n\n    this.removeAllListeners();\n  }\n}\n\nexport default Room;\n","import Room from \"./Room.js\";\n\n/**\n * SubRoom extends Room with additional functionality for breakout rooms\n */\nclass SubRoom extends Room {\n  constructor(config) {\n    super({\n      ...config,\n      type: config.type || \"breakout\",\n    });\n\n    this.parentRoom = config.parentRoom; // Reference to parent Room instance\n    this.maxParticipants = config.maxParticipants || 10;\n    this.autoReturn = config.autoReturn || false; // Auto return to main room when empty\n    this.duration = config.duration || null; // Duration in minutes, null = unlimited\n    this.startTime = null;\n\n    // Sub room specific state\n    this.isTemporary = config.isTemporary || true;\n    this.allowSelfAssign = config.allowSelfAssign || true;\n\n    this._setupSubRoomEvents();\n  }\n\n  /**\n   * Join the sub room from main room\n   */\n  async joinFromMain(userId) {\n    if (!this.parentRoom) {\n      throw new Error(\"No parent room reference\");\n    }\n\n    try {\n      this.emit(\"joiningFromMain\", { subRoom: this, userId });\n\n      // Pause main room media without leaving\n      await this.parentRoom._pauseMediaConnections();\n\n      // Join this sub room\n      const joinResult = await this.join(userId);\n\n      // Start duration timer if set\n      if (this.duration && !this.startTime) {\n        this.startTime = Date.now();\n        this._startDurationTimer();\n      }\n\n      this.emit(\"joinedFromMain\", { subRoom: this, userId, joinResult });\n\n      return joinResult;\n    } catch (error) {\n      // Resume main room media on error\n      if (this.parentRoom) {\n        await this.parentRoom._resumeMediaConnections();\n      }\n\n      this.emit(\"error\", { subRoom: this, error, action: \"joinFromMain\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Return to main room\n   */\n  async returnToMainRoom() {\n    if (!this.parentRoom) {\n      throw new Error(\"No parent room reference\");\n    }\n\n    try {\n      this.emit(\"returningToMain\", { subRoom: this });\n\n      // Leave sub room\n      await this.leave();\n\n      // Resume main room media\n      await this.parentRoom._resumeMediaConnections();\n\n      this.emit(\"returnedToMain\", { subRoom: this });\n\n      // Check if should cleanup empty room\n      if (this.participants.size === 0 && this.autoReturn) {\n        await this.cleanup();\n      }\n\n      return this.parentRoom;\n    } catch (error) {\n      this.emit(\"error\", { subRoom: this, error, action: \"returnToMainRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Switch to another sub room directly\n   */\n  async switchToSubRoom(targetSubRoom) {\n    if (!this.parentRoom) {\n      throw new Error(\"No parent room reference\");\n    }\n\n    try {\n      this.emit(\"switchingToSubRoom\", {\n        fromSubRoom: this,\n        toSubRoom: targetSubRoom,\n      });\n\n      // Leave current sub room\n      await this.leave();\n\n      // Join target sub room\n      const joinResult = await targetSubRoom.joinFromMain(\n        this.localParticipant?.userId\n      );\n\n      this.emit(\"switchedToSubRoom\", {\n        fromSubRoom: this,\n        toSubRoom: targetSubRoom,\n      });\n\n      return joinResult;\n    } catch (error) {\n      this.emit(\"error\", { subRoom: this, error, action: \"switchToSubRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Invite participant to this sub room\n   */\n  async inviteParticipant(userId) {\n    try {\n      // Send invitation via API (implementation depends on API support)\n      const result = await this.apiClient.inviteToSubRoom(this.id, userId);\n\n      this.emit(\"participantInvited\", { subRoom: this, userId, result });\n\n      return result;\n    } catch (error) {\n      this.emit(\"error\", { subRoom: this, error, action: \"inviteParticipant\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Assign participant to this sub room (host action)\n   */\n  async assignParticipant(userId) {\n    try {\n      // Force assignment via API\n      const result = await this.apiClient.assignToSubRoom(this.id, userId);\n\n      this.emit(\"participantAssigned\", { subRoom: this, userId, result });\n\n      return result;\n    } catch (error) {\n      this.emit(\"error\", { subRoom: this, error, action: \"assignParticipant\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Broadcast message to all participants\n   */\n  async broadcastMessage(message, type = \"info\") {\n    try {\n      const result = await this.apiClient.broadcastToSubRoom(\n        this.id,\n        message,\n        type\n      );\n\n      this.emit(\"messageBroadcast\", { subRoom: this, message, type, result });\n\n      return result;\n    } catch (error) {\n      this.emit(\"error\", { subRoom: this, error, action: \"broadcastMessage\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Get remaining time in minutes\n   */\n  getRemainingTime() {\n    if (!this.duration || !this.startTime) {\n      return null;\n    }\n\n    const elapsed = (Date.now() - this.startTime) / (1000 * 60); // in minutes\n    const remaining = Math.max(0, this.duration - elapsed);\n\n    return Math.ceil(remaining);\n  }\n\n  /**\n   * Extend sub room duration\n   */\n  extendDuration(additionalMinutes) {\n    if (!this.duration) {\n      this.duration = additionalMinutes;\n      this.startTime = Date.now();\n    } else {\n      this.duration += additionalMinutes;\n    }\n\n    this.emit(\"durationExtended\", {\n      subRoom: this,\n      additionalMinutes,\n      newDuration: this.duration,\n    });\n\n    // Restart timer if needed\n    if (this.startTime) {\n      this._startDurationTimer();\n    }\n  }\n\n  /**\n   * Set participant limit\n   */\n  setMaxParticipants(limit) {\n    this.maxParticipants = limit;\n\n    this.emit(\"maxParticipantsChanged\", {\n      subRoom: this,\n      maxParticipants: limit,\n    });\n\n    // If over limit, may need to handle overflow\n    if (this.participants.size > limit) {\n      this.emit(\"participantLimitExceeded\", {\n        subRoom: this,\n        current: this.participants.size,\n        limit,\n      });\n    }\n  }\n\n  /**\n   * Check if sub room is full\n   */\n  isFull() {\n    return this.participants.size >= this.maxParticipants;\n  }\n\n  /**\n   * Check if sub room is empty\n   */\n  isEmpty() {\n    return this.participants.size === 0;\n  }\n\n  /**\n   * Check if sub room has expired\n   */\n  hasExpired() {\n    if (!this.duration || !this.startTime) {\n      return false;\n    }\n\n    const elapsed = (Date.now() - this.startTime) / (1000 * 60);\n    return elapsed >= this.duration;\n  }\n\n  /**\n   * Get sub room statistics\n   */\n  getStats() {\n    return {\n      ...this.getInfo(),\n      maxParticipants: this.maxParticipants,\n      duration: this.duration,\n      remainingTime: this.getRemainingTime(),\n      startTime: this.startTime,\n      isFull: this.isFull(),\n      isEmpty: this.isEmpty(),\n      hasExpired: this.hasExpired(),\n      isTemporary: this.isTemporary,\n      allowSelfAssign: this.allowSelfAssign,\n      autoReturn: this.autoReturn,\n    };\n  }\n\n  /**\n   * Setup sub room specific events\n   */\n  _setupSubRoomEvents() {\n    // Handle participant left\n    this.on(\"participantRemoved\", ({ room, participant }) => {\n      // Auto return to main room if empty and configured to do so\n      if (this.isEmpty() && this.autoReturn && this.parentRoom) {\n        setTimeout(() => {\n          if (this.isEmpty()) {\n            // Double check after delay\n            this.cleanup();\n          }\n        }, 5000); // 5 second delay\n      }\n    });\n\n    // Handle room expiry warnings\n    if (this.duration) {\n      // Warn 5 minutes before expiry\n      const warningTime = Math.max(1, this.duration - 5);\n      setTimeout(() => {\n        if (this.isActive && !this.hasExpired()) {\n          this.emit(\"expiryWarning\", { subRoom: this, remainingMinutes: 5 });\n        }\n      }, warningTime * 60 * 1000);\n    }\n  }\n\n  /**\n   * Start duration timer for automatic closure\n   */\n  _startDurationTimer() {\n    if (this._durationTimer) {\n      clearTimeout(this._durationTimer);\n    }\n\n    if (!this.duration) return;\n\n    const remainingMs = this.getRemainingTime() * 60 * 1000;\n\n    if (remainingMs <= 0) {\n      this._handleExpiry();\n      return;\n    }\n\n    this._durationTimer = setTimeout(() => {\n      this._handleExpiry();\n    }, remainingMs);\n  }\n\n  /**\n   * Handle sub room expiry\n   */\n  async _handleExpiry() {\n    this.emit(\"expired\", { subRoom: this });\n\n    // Notify all participants\n    await this.broadcastMessage(\n      \"Sub room session has expired. Returning to main room.\",\n      \"warning\"\n    );\n\n    // Return all participants to main room\n    const participants = Array.from(this.participants.values());\n    for (const participant of participants) {\n      if (participant.isLocal) {\n        await this.returnToMainRoom();\n      }\n    }\n\n    // Cleanup sub room\n    await this.cleanup();\n  }\n\n  /**\n   * Override cleanup to clear timers\n   */\n  async cleanup() {\n    // Clear duration timer\n    if (this._durationTimer) {\n      clearTimeout(this._durationTimer);\n      this._durationTimer = null;\n    }\n\n    // Remove from parent room's sub rooms map\n    if (this.parentRoom) {\n      this.parentRoom.subRooms.delete(this.id);\n    }\n\n    // Call parent cleanup\n    await super.cleanup();\n\n    this.emit(\"cleanedUp\", { subRoom: this });\n  }\n\n  /**\n   * Serialize sub room state for persistence or transfer\n   */\n  serialize() {\n    return {\n      ...this.getStats(),\n      participantIds: Array.from(this.participants.keys()),\n      parentRoomId: this.parentRoom?.id || this.parentRoomId,\n      createdAt: this.startTime || Date.now(),\n    };\n  }\n\n  /**\n   * Create sub room from serialized data\n   */\n  static fromSerializedData(data, parentRoom, apiClient, mediaConfig) {\n    return new SubRoom({\n      id: data.id,\n      name: data.name,\n      code: data.code,\n      type: data.type,\n      parentRoom,\n      parentRoomId: data.parentRoomId,\n      ownerId: data.ownerId,\n      maxParticipants: data.maxParticipants,\n      duration: data.duration,\n      autoReturn: data.autoReturn,\n      isTemporary: data.isTemporary,\n      allowSelfAssign: data.allowSelfAssign,\n      apiClient,\n      mediaConfig,\n    });\n  }\n}\n\nexport default SubRoom;\n","import EventEmitter from \"../events/EventEmitter.js\";\nimport ApiClient from \"../api/ApiClient.js\";\nimport Room from \"./Room.js\";\nimport SubRoom from \"./SubRoom.js\";\n\n/**\n * Main Ermis Classroom client\n */\nclass ErmisClient extends EventEmitter {\n  constructor(config = {}) {\n    super();\n\n    // Configuration\n    this.config = {\n      host: config.host || \"daibo.ermis.network:9992\",\n      apiUrl:\n        config.apiUrl ||\n        `https://${config.host || \"daibo.ermis.network:9992\"}/meeting`,\n      webtpUrl:\n        config.webtpUrl || \"https://daibo.ermis.network:4458/meeting/wt\",\n      reconnectAttempts: config.reconnectAttempts || 3,\n      reconnectDelay: config.reconnectDelay || 2000,\n      debug: config.debug || false,\n    };\n\n    // API client\n    this.apiClient = new ApiClient({\n      host: this.config.host,\n      apiUrl: this.config.apiUrl,\n    });\n\n    // State management\n    this.state = {\n      user: null,\n      isAuthenticated: false,\n      currentRoom: null,\n      rooms: new Map(), // roomId -> Room\n      connectionStatus: \"disconnected\", // 'disconnected', 'connecting', 'connected', 'failed'\n    };\n\n    // Media configuration\n    this.mediaConfig = {\n      host: this.config.host,\n      webtpUrl: this.config.webtpUrl,\n      defaultVideoConfig: {\n        width: 1280,\n        height: 720,\n        framerate: 30,\n        bitrate: 1_500_000,\n      },\n      defaultAudioConfig: {\n        sampleRate: 48000,\n        channels: 2,\n      },\n    };\n\n    this._setupEventHandlers();\n  }\n\n  /**\n   * Authenticate user\n   */\n  async authenticate(userId) {\n    if (this.state.isAuthenticated && this.state.user?.id === userId) {\n      return this.state.user;\n    }\n\n    try {\n      this.emit(\"authenticating\", { userId });\n      this._setConnectionStatus(\"connecting\");\n\n      // Validate email format if it looks like email\n      if (userId.includes(\"@\")) {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        if (!emailRegex.test(userId)) {\n          throw new Error(\"Invalid email format\");\n        }\n      }\n\n      // Get authentication token\n      const tokenResponse = await this.apiClient.getDummyToken(userId);\n\n      // Set authentication in API client\n      this.apiClient.setAuth(tokenResponse.access_token, userId);\n\n      // Update state\n      this.state.user = {\n        id: userId,\n        token: tokenResponse.access_token,\n        authenticatedAt: Date.now(),\n      };\n      this.state.isAuthenticated = true;\n\n      this._setConnectionStatus(\"connected\");\n      this.emit(\"authenticated\", { user: this.state.user });\n\n      this._debug(\"User authenticated successfully:\", userId);\n\n      return this.state.user;\n    } catch (error) {\n      this._setConnectionStatus(\"failed\");\n      this.emit(\"authenticationFailed\", { userId, error });\n      this._debug(\"Authentication failed:\", error);\n      throw error;\n    }\n  }\n\n  /**\n * Set authentication directly without calling API\n */\n  manualAuthenticate(userId, token) {\n    if (!userId || !token) {\n      throw new Error(\"userId and token are required\");\n    }\n\n    // Set auth to API client\n    this.apiClient.setAuth(token, userId);\n\n    // Update state\n    this.state.user = {\n      id: userId,\n      token,\n      authenticatedAt: Date.now(),\n    };\n    this.state.isAuthenticated = true;\n\n    // Update connection status\n    this._setConnectionStatus(\"connected\");\n\n    // Emit event\n    this.emit(\"authenticated\", { user: this.state.user });\n\n    this._debug(\"Auth set directly:\", this.state.user);\n  }\n\n  /**\n   * Logout user\n   */\n  async logout() {\n    if (!this.state.isAuthenticated) {\n      return;\n    }\n\n    try {\n      this.emit(\"loggingOut\", { user: this.state.user });\n\n      // Leave current room if any\n      if (this.state.currentRoom) {\n        await this.state.currentRoom.leave();\n      }\n\n      // Reset state\n      this.state.user = null;\n      this.state.isAuthenticated = false;\n      this.state.currentRoom = null;\n      this.state.rooms.clear();\n\n      this._setConnectionStatus(\"disconnected\");\n      this.emit(\"loggedOut\");\n\n      this._debug(\"User logged out successfully\");\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"logout\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Create a new room\n   */\n  async createRoom(config) {\n    this._ensureAuthenticated();\n\n    try {\n      this.emit(\"creatingRoom\", { config });\n\n      const roomData = await this.apiClient.createRoom(\n        config.name,\n        config.type\n      );\n\n      const room = new Room({\n        id: roomData.id,\n        name: roomData.room_name,\n        code: roomData.room_code,\n        type: config.type || \"main\",\n        ownerId: roomData.user_id,\n        apiClient: this.apiClient,\n        mediaConfig: this.mediaConfig,\n      });\n\n      this._setupRoomEvents(room);\n      this.state.rooms.set(room.id, room);\n\n      this.emit(\"roomCreated\", { room });\n      this._debug(\"Room created:\", room.getInfo());\n\n      // Auto-join if specified\n      if (config.autoJoin !== false) {\n        await this.joinRoom(room.code);\n      }\n\n      return room;\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"createRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Join a room by code\n   */\n  async joinRoom(roomCode) {\n    this._ensureAuthenticated();\n\n    try {\n      this.emit(\"joiningRoom\", { roomCode });\n\n      // Leave current room if any\n      if (this.state.currentRoom) {\n        await this.state.currentRoom.leave();\n      }\n\n      // Try to find existing room instance first\n      let room = Array.from(this.state.rooms.values()).find(\n        (r) => r.code === roomCode\n      );\n\n      if (!room) {\n        // Create new room instance\n        room = new Room({\n          code: roomCode,\n          apiClient: this.apiClient,\n          mediaConfig: this.mediaConfig,\n        });\n\n        this._setupRoomEvents(room);\n      }\n\n      // Join the room\n      const joinResult = await room.join(this.state.user.id);\n\n      // Update state\n      this.state.currentRoom = room;\n      this.state.rooms.set(room.id, room);\n\n      this.emit(\"roomJoined\", { room, joinResult });\n      this._debug(\"Joined room:\", room.getInfo());\n\n      return joinResult;\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"joinRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Leave current room\n   */\n  async leaveRoom() {\n    if (!this.state.currentRoom) {\n      return;\n    }\n\n    try {\n      const room = this.state.currentRoom;\n      this.emit(\"leavingRoom\", { room });\n\n      await room.leave();\n\n      this.state.currentRoom = null;\n\n      this.emit(\"roomLeft\", { room });\n      this._debug(\"Left room:\", room.getInfo());\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"leaveRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Get available rooms\n   */\n  async getRooms(options = {}) {\n    this._ensureAuthenticated();\n\n    try {\n      const response = await this.apiClient.listRooms(\n        options.page || 1,\n        options.perPage || 20\n      );\n\n      this.emit(\"roomsLoaded\", { rooms: response.data || [] });\n\n      return response.data || [];\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"getRooms\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Get current room\n   */\n  getCurrentRoom() {\n    return this.state.currentRoom;\n  }\n\n  /**\n   * Get room by ID\n   */\n  getRoom(roomId) {\n    return this.state.rooms.get(roomId);\n  }\n\n  /**\n   * Create sub room in current room\n   */\n  async createSubRoom(config) {\n    if (!this.state.currentRoom) {\n      throw new Error(\"Must be in a main room to create sub rooms\");\n    }\n\n    if (this.state.currentRoom.type !== \"main\") {\n      throw new Error(\"Can only create sub rooms from main rooms\");\n    }\n\n    try {\n      this.emit(\"creatingSubRoom\", {\n        config,\n        parentRoom: this.state.currentRoom,\n      });\n\n      const subRoom = await this.state.currentRoom.createSubRoom(config);\n\n      this.emit(\"subRoomCreated\", {\n        subRoom,\n        parentRoom: this.state.currentRoom,\n      });\n      this._debug(\"Sub room created:\", subRoom.getInfo());\n\n      return subRoom;\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"createSubRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Join a sub room\n   */\n  async joinSubRoom(subRoomCode) {\n    if (!this.state.currentRoom) {\n      throw new Error(\"Must be in a main room to join sub rooms\");\n    }\n\n    try {\n      this.emit(\"joiningSubRoom\", {\n        subRoomCode,\n        parentRoom: this.state.currentRoom,\n      });\n\n      // Find sub room\n      const subRooms = await this.state.currentRoom.getSubRooms();\n      const subRoom = subRooms.find((sr) => sr.code === subRoomCode);\n\n      if (!subRoom) {\n        throw new Error(`Sub room with code ${subRoomCode} not found`);\n      }\n\n      // Join sub room\n      const joinResult = await subRoom.joinFromMain(this.state.user.id);\n\n      this.emit(\"subRoomJoined\", {\n        subRoom,\n        parentRoom: this.state.currentRoom,\n      });\n      this._debug(\"Joined sub room:\", subRoom.getInfo());\n\n      return joinResult;\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"joinSubRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Return to main room from sub room\n   */\n  async returnToMainRoom() {\n    if (!this.state.currentRoom || this.state.currentRoom.type !== \"breakout\") {\n      throw new Error(\"Must be in a sub room to return to main room\");\n    }\n\n    try {\n      this.emit(\"returningToMainRoom\", { subRoom: this.state.currentRoom });\n\n      const subRoom = this.state.currentRoom;\n      const mainRoom = await subRoom.returnToMainRoom();\n\n      this.state.currentRoom = mainRoom;\n\n      this.emit(\"returnedToMainRoom\", { mainRoom, previousSubRoom: subRoom });\n      this._debug(\"Returned to main room from sub room\");\n\n      return mainRoom;\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"returnToMainRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Switch between sub rooms\n   */\n  async switchSubRoom(targetSubRoomCode) {\n    if (!this.state.currentRoom || this.state.currentRoom.type !== \"breakout\") {\n      throw new Error(\"Must be in a sub room to switch to another sub room\");\n    }\n\n    try {\n      this.emit(\"switchingSubRoom\", {\n        fromSubRoom: this.state.currentRoom,\n        targetSubRoomCode,\n      });\n\n      const currentSubRoom = this.state.currentRoom;\n      const parentRoom = currentSubRoom.parentRoom;\n\n      // Find target sub room\n      const subRooms = await parentRoom.getSubRooms();\n      const targetSubRoom = subRooms.find(\n        (sr) => sr.code === targetSubRoomCode\n      );\n\n      if (!targetSubRoom) {\n        throw new Error(`Sub room with code ${targetSubRoomCode} not found`);\n      }\n\n      // Switch to target sub room\n      const joinResult = await currentSubRoom.switchToSubRoom(targetSubRoom);\n\n      this.state.currentRoom = targetSubRoom;\n\n      this.emit(\"subRoomSwitched\", {\n        fromSubRoom: currentSubRoom,\n        toSubRoom: targetSubRoom,\n      });\n      this._debug(\"Switched sub rooms:\", {\n        from: currentSubRoom.getInfo(),\n        to: targetSubRoom.getInfo(),\n      });\n\n      return joinResult;\n    } catch (error) {\n      this.emit(\"error\", { error, action: \"switchSubRoom\" });\n      throw error;\n    }\n  }\n\n  /**\n   * Get client state\n   */\n  getState() {\n    return {\n      user: this.state.user,\n      isAuthenticated: this.state.isAuthenticated,\n      currentRoom: this.state.currentRoom?.getInfo() || null,\n      connectionStatus: this.state.connectionStatus,\n      roomCount: this.state.rooms.size,\n    };\n  }\n\n  /**\n   * Get client configuration\n   */\n  getConfig() {\n    return { ...this.config };\n  }\n\n  /**\n   * Update configuration\n   */\n  updateConfig(newConfig) {\n    this.config = { ...this.config, ...newConfig };\n\n    // Update API client if needed\n    if (newConfig.host || newConfig.apiUrl) {\n      this.apiClient = new ApiClient({\n        host: this.config.host,\n        apiUrl: this.config.apiUrl,\n      });\n\n      if (this.state.isAuthenticated) {\n        this.apiClient.setAuth(this.state.user.token, this.state.user.id);\n      }\n    }\n\n    this.emit(\"configUpdated\", { config: this.config });\n  }\n\n  /**\n   * Enable debug mode\n   */\n  enableDebug() {\n    this.config.debug = true;\n    this._debug(\"Debug mode enabled\");\n  }\n\n  /**\n   * Disable debug mode\n   */\n  disableDebug() {\n    this.config.debug = false;\n  }\n\n  async sendMessage(text, metadata = {}) {\n    if (!this.state.currentRoom) {\n      throw new Error(\"No active room. Join a room first.\");\n    }\n\n    return await this.state.currentRoom.sendMessage(text, metadata);\n  }\n\n  async deleteMessage(messageId) {\n    if (!this.state.currentRoom) {\n      throw new Error(\"No active room. Join a room first.\");\n    }\n\n    return await this.state.currentRoom.deleteMessage(messageId);\n  }\n\n  async updateMessage(messageId, newText, metadata = {}) {\n    if (!this.state.currentRoom) {\n      throw new Error(\"No active room. Join a room first.\");\n    }\n\n    return await this.state.currentRoom.updateMessage(messageId, newText, metadata);\n  }\n\n  async sendTypingIndicator(isTyping = true) {\n    if (!this.state.currentRoom) {\n      return;\n    }\n\n    return await this.state.currentRoom.sendTypingIndicator(isTyping);\n  }\n\n  getMessages(limit = 100) {\n    if (!this.state.currentRoom) {\n      return [];\n    }\n\n    return this.state.currentRoom.getMessages(limit);\n  }\n\n  getTypingUsers() {\n    if (!this.state.currentRoom) {\n      return [];\n    }\n\n    return this.state.currentRoom.getTypingUsers();\n  }\n\n  clearMessages() {\n    if (!this.state.currentRoom) {\n      return;\n    }\n\n    this.state.currentRoom.clearMessages();\n  }\n\n  /**\n   * Cleanup client resources\n   */\n  async cleanup() {\n    try {\n      // Leave current room\n      if (this.state.currentRoom) {\n        await this.state.currentRoom.leave();\n      }\n\n      // Cleanup all rooms\n      for (const room of this.state.rooms.values()) {\n        await room.cleanup();\n      }\n\n      // Clear state\n      this.state.rooms.clear();\n      this.state.currentRoom = null;\n\n      // Remove all listeners\n      this.removeAllListeners();\n\n      this._debug(\"Client cleanup completed\");\n    } catch (error) {\n      console.error(\"Error during cleanup:\", error);\n    }\n  }\n\n  /**\n   * Setup event handlers for rooms\n   */\n  _setupRoomEvents(room) {\n    // Forward room events to client\n    const eventsToForward = [\n      \"roomJoined\",\n      \"roomLeft\",\n      \"participantAdded\",\n      \"participantRemoved\",\n      \"participantPinned\",\n      \"participantUnpinned\",\n      \"subRoomCreated\",\n      \"localStreamReady\",\n      \"remoteStreamReady\",\n      \"streamRemoved\",\n      \"audioToggled\",\n      \"videoToggled\",\n      \"messageSent\",\n      \"messageReceived\",\n      \"messageDeleted\",\n      \"messageUpdated\",\n      \"typingStarted\",\n      \"typingStopped\",\n      \"error\",\n    ];\n\n    eventsToForward.forEach((event) => {\n      room.on(event, (data) => {\n        this.emit(\n          event,\n          data\n        );\n      });\n    });\n  }\n\n  /**\n   * Setup initial event handlers\n   */\n  _setupEventHandlers() {\n    // Handle authentication token refresh\n    this.on(\"authenticated\", () => {\n      // Could implement token refresh logic here\n    });\n\n    // Handle connection status changes\n    this.on(\"connectionStatusChanged\", ({ status }) => {\n      if (status === \"failed\" && this.config.reconnectAttempts > 0) {\n        this._attemptReconnect();\n      }\n    });\n  }\n\n  /**\n   * Attempt to reconnect\n   */\n  async _attemptReconnect() {\n    let attempts = 0;\n\n    while (attempts < this.config.reconnectAttempts) {\n      try {\n        attempts++;\n        this._debug(\n          `Reconnection attempt ${attempts}/${this.config.reconnectAttempts}`\n        );\n\n        await new Promise((resolve) =>\n          setTimeout(resolve, this.config.reconnectDelay)\n        );\n\n        if (this.state.user) {\n          await this.authenticate(this.state.user.id);\n          this._debug(\"Reconnection successful\");\n          return;\n        }\n      } catch (error) {\n        this._debug(`Reconnection attempt ${attempts} failed:`, error.message);\n      }\n    }\n\n    this.emit(\"reconnectionFailed\");\n    this._debug(\"All reconnection attempts failed\");\n  }\n\n  /**\n   * Set connection status\n   */\n  _setConnectionStatus(status) {\n    if (this.state.connectionStatus !== status) {\n      this.state.connectionStatus = status;\n      this.emit(\"connectionStatusChanged\", { status });\n      this._debug(\"Connection status changed:\", status);\n    }\n  }\n\n  /**\n   * Ensure user is authenticated\n   */\n  _ensureAuthenticated() {\n    if (!this.state.isAuthenticated) {\n      throw new Error(\"User must be authenticated first\");\n    }\n  }\n\n  /**\n   * Debug logging\n   */\n  _debug(...args) {\n    if (this.config.debug) {\n      console.log(\"[ErmisClient]\", ...args);\n    }\n  }\n}\n\nexport default ErmisClient;\n","/**\n * Ermis Classroom SDK\n * Main entry point for the SDK\n */\n\nimport ErmisClient from \"./core/ErmisClient.js\";\nimport Room from \"./core/Room.js\";\nimport SubRoom from \"./core/SubRoom.js\";\nimport Participant from \"./core/Participant.js\";\nimport ApiClient from \"./api/ApiClient.js\";\nimport EventEmitter from \"./events/EventEmitter.js\";\n\n/**\n * SDK Version\n */\nexport const VERSION = \"1.0.0\";\n\n/**\n * Main SDK Class - Similar to LiveKit pattern\n */\nclass ErmisClassroom {\n  /**\n   * Create a new Ermis Classroom client\n   * @param {Object} config - Configuration options\n   * @returns {ErmisClient} - New client instance\n   */\n  static create(config = {}) {\n    return new ErmisClient(config);\n  }\n\n  /**\n   * Connect and authenticate user\n   * @param {string} serverUrl - Server URL\n   * @param {string} userId - User identifier\n   * @param {Object} options - Connection options\n   * @returns {Promise<ErmisClient>} - Connected client\n   */\n  static async connect(serverUrl, userId, options = {}) {\n    const config = {\n      host: serverUrl.replace(/^https?:\\/\\//, \"\"),\n      ...options,\n    };\n\n    const client = new ErmisClient(config);\n    await client.authenticate(userId);\n\n    return client;\n  }\n\n  /**\n   * Get SDK version\n   */\n  static get version() {\n    return VERSION;\n  }\n\n  /**\n   * Get available events\n   */\n  static get events() {\n    return {\n      // Client events\n      CLIENT_AUTHENTICATED: \"authenticated\",\n      CLIENT_AUTHENTICATION_FAILED: \"authenticationFailed\",\n      CLIENT_LOGGED_OUT: \"loggedOut\",\n      CLIENT_CONNECTION_STATUS_CHANGED: \"connectionStatusChanged\",\n\n      // Room events\n      ROOM_CREATED: \"roomCreated\",\n      ROOM_JOINED: \"roomJoined\",\n      ROOM_LEFT: \"roomLeft\",\n\n      // Participant events\n      PARTICIPANT_ADDED: \"participantAdded\",\n      PARTICIPANT_REMOVED: \"participantRemoved\",\n      PARTICIPANT_PINNED: \"participantPinned\",\n      PARTICIPANT_UNPINNED: \"participantUnpinned\",\n      AUDIO_TOGGLED: \"audioToggled\",\n      VIDEO_TOGGLED: \"videoToggled\",\n\n      // Remote participant status events\n      REMOTE_AUDIO_STATUS_CHANGED: \"remoteAudioStatusChanged\",\n      REMOTE_VIDEO_STATUS_CHANGED: \"remoteVideoStatusChanged\",\n\n      // Screen sharing events\n      SCREEN_SHARE_STARTED: \"screenShareStarted\",\n      SCREEN_SHARE_STOPPED: \"screenShareStopped\",\n      REMOTE_SCREEN_SHARE_STARTED: \"remoteScreenShareStarted\",\n      REMOTE_SCREEN_SHARE_STOPPED: \"remoteScreenShareStopped\",\n\n      // Pin for everyone events\n      PARTICIPANT_PINNED_FOR_EVERYONE: \"participantPinnedForEveryone\",\n      PARTICIPANT_UNPINNED_FOR_EVERYONE: \"participantUnpinnedForEveryone\",\n\n      // Sub room events\n      SUB_ROOM_CREATED: \"subRoomCreated\",\n      SUB_ROOM_JOINED: \"subRoomJoined\",\n      SUB_ROOM_LEFT: \"subRoomLeft\",\n      SUB_ROOM_SWITCHED: \"subRoomSwitched\",\n\n      // Media stream events\n      LOCAL_STREAM_READY: \"localStreamReady\",\n      REMOTE_STREAM_READY: \"remoteStreamReady\",\n      STREAM_REMOVED: \"streamRemoved\",\n\n      // Chat events\n      MESSAGE_SENT: \"messageSent\",\n      MESSAGE_RECEIVED: \"messageReceived\",\n      MESSAGE_DELETED: \"messageDeleted\",\n      MESSAGE_UPDATED: \"messageUpdated\",\n      TYPING_STARTED: \"typingStarted\",\n      TYPING_STOPPED: \"typingStopped\",\n      CHAT_HISTORY_LOADED: \"chatHistoryLoaded\",\n\n      // Error events\n      ERROR: \"error\",\n    };\n  }\n\n  /**\n   * Media device utilities\n   */\n  static get MediaDevices() {\n    return {\n      /**\n       * Get available media devices\n       */\n      async getDevices() {\n        if (!navigator.mediaDevices?.enumerateDevices) {\n          throw new Error(\"Media devices not supported\");\n        }\n\n        const devices = await navigator.mediaDevices.enumerateDevices();\n\n        return {\n          cameras: devices.filter((d) => d.kind === \"videoinput\"),\n          microphones: devices.filter((d) => d.kind === \"audioinput\"),\n          speakers: devices.filter((d) => d.kind === \"audiooutput\"),\n        };\n      },\n\n      /**\n       * Get user media with constraints\n       */\n      async getUserMedia(constraints = { video: true, audio: true }) {\n        if (!navigator.mediaDevices?.getUserMedia) {\n          throw new Error(\"getUserMedia not supported\");\n        }\n\n        return await navigator.mediaDevices.getUserMedia(constraints);\n      },\n\n      /**\n       * Check for media permissions\n       */\n      async checkPermissions() {\n        const permissions = {};\n\n        if (navigator.permissions) {\n          try {\n            permissions.camera = await navigator.permissions.query({\n              name: \"camera\",\n            });\n            permissions.microphone = await navigator.permissions.query({\n              name: \"microphone\",\n            });\n          } catch (error) {\n            console.warn(\"Permission check failed:\", error);\n          }\n        }\n\n        return permissions;\n      },\n    };\n  }\n\n  /**\n   * Room types constants\n   */\n  static get RoomTypes() {\n    return {\n      MAIN: \"main\",\n      BREAKOUT: \"breakout\",\n      PRESENTATION: \"presentation\",\n      DISCUSSION: \"discussion\",\n    };\n  }\n\n  /**\n   * Connection status constants\n   */\n  static get ConnectionStatus() {\n    return {\n      DISCONNECTED: \"disconnected\",\n      CONNECTING: \"connecting\",\n      CONNECTED: \"connected\",\n      FAILED: \"failed\",\n    };\n  }\n\n  /**\n   * Participant roles constants\n   */\n  static get ParticipantRoles() {\n    return {\n      OWNER: \"owner\",\n      MODERATOR: \"moderator\",\n      PARTICIPANT: \"participant\",\n      OBSERVER: \"observer\",\n    };\n  }\n}\n\n/**\n * Named exports for individual classes\n */\nexport { ErmisClient, Room, SubRoom, Participant, ApiClient, EventEmitter };\n\n/**\n * Default export - Main SDK class\n */\nexport default ErmisClassroom;\n","let wasm;\n\nconst cachedTextDecoder = (typeof TextDecoder !== 'undefined' ? new TextDecoder('utf-8', { ignoreBOM: true, fatal: true }) : { decode: () => { throw Error('TextDecoder not available') } } );\n\nif (typeof TextDecoder !== 'undefined') { cachedTextDecoder.decode(); };\n\nlet cachedUint8ArrayMemory0 = null;\n\nfunction getUint8ArrayMemory0() {\n    if (cachedUint8ArrayMemory0 === null || cachedUint8ArrayMemory0.byteLength === 0) {\n        cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachedUint8ArrayMemory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    ptr = ptr >>> 0;\n    return cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(ptr, ptr + len));\n}\n\nlet WASM_VECTOR_LEN = 0;\n\nfunction passArray8ToWasm0(arg, malloc) {\n    const ptr = malloc(arg.length * 1, 1) >>> 0;\n    getUint8ArrayMemory0().set(arg, ptr / 1);\n    WASM_VECTOR_LEN = arg.length;\n    return ptr;\n}\n\nconst WasmEncoderFinalization = (typeof FinalizationRegistry === 'undefined')\n    ? { register: () => {}, unregister: () => {} }\n    : new FinalizationRegistry(ptr => wasm.__wbg_wasmencoder_free(ptr >>> 0, 1));\n\nexport class WasmEncoder {\n\n    __destroy_into_raw() {\n        const ptr = this.__wbg_ptr;\n        this.__wbg_ptr = 0;\n        WasmEncoderFinalization.unregister(this);\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_wasmencoder_free(ptr, 0);\n    }\n    /**\n     * @param {Uint8Array} data\n     * @param {number} mtu\n     */\n    constructor(data, mtu) {\n        const ptr0 = passArray8ToWasm0(data, wasm.__wbindgen_malloc);\n        const len0 = WASM_VECTOR_LEN;\n        const ret = wasm.wasmencoder_new(ptr0, len0, mtu);\n        this.__wbg_ptr = ret >>> 0;\n        WasmEncoderFinalization.register(this, this.__wbg_ptr, this);\n        return this;\n    }\n    /**\n     * @param {number} repair_packets_count\n     * @returns {Array<any>}\n     */\n    encode(repair_packets_count) {\n        const ret = wasm.wasmencoder_encode(this.__wbg_ptr, repair_packets_count);\n        return ret;\n    }\n    /**\n     * @returns {number}\n     */\n    getMTU() {\n        const ret = wasm.wasmencoder_getMTU(this.__wbg_ptr);\n        return ret;\n    }\n    /**\n     * @returns {Uint8Array}\n     */\n    getConfigBuffer() {\n        const ret = wasm.wasmencoder_getConfigBuffer(this.__wbg_ptr);\n        return ret;\n    }\n}\n\nasync function __wbg_load(module, imports) {\n    if (typeof Response === 'function' && module instanceof Response) {\n        if (typeof WebAssembly.instantiateStreaming === 'function') {\n            try {\n                return await WebAssembly.instantiateStreaming(module, imports);\n\n            } catch (e) {\n                if (module.headers.get('Content-Type') != 'application/wasm') {\n                    console.warn(\"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\", e);\n\n                } else {\n                    throw e;\n                }\n            }\n        }\n\n        const bytes = await module.arrayBuffer();\n        return await WebAssembly.instantiate(bytes, imports);\n\n    } else {\n        const instance = await WebAssembly.instantiate(module, imports);\n\n        if (instance instanceof WebAssembly.Instance) {\n            return { instance, module };\n\n        } else {\n            return instance;\n        }\n    }\n}\n\nfunction __wbg_get_imports() {\n    const imports = {};\n    imports.wbg = {};\n    imports.wbg.__wbg_buffer_609cc3eee51ed158 = function(arg0) {\n        const ret = arg0.buffer;\n        return ret;\n    };\n    imports.wbg.__wbg_length_a446193dc22c12f8 = function(arg0) {\n        const ret = arg0.length;\n        return ret;\n    };\n    imports.wbg.__wbg_new_78feb108b6472713 = function() {\n        const ret = new Array();\n        return ret;\n    };\n    imports.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a = function(arg0, arg1, arg2) {\n        const ret = new Uint8Array(arg0, arg1 >>> 0, arg2 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_newwithlength_a381634e90c276d4 = function(arg0) {\n        const ret = new Uint8Array(arg0 >>> 0);\n        return ret;\n    };\n    imports.wbg.__wbg_push_737cfc8c1432c2c6 = function(arg0, arg1) {\n        const ret = arg0.push(arg1);\n        return ret;\n    };\n    imports.wbg.__wbg_set_65595bdd868b3009 = function(arg0, arg1, arg2) {\n        arg0.set(arg1, arg2 >>> 0);\n    };\n    imports.wbg.__wbindgen_init_externref_table = function() {\n        const table = wasm.__wbindgen_export_0;\n        const offset = table.grow(4);\n        table.set(0, undefined);\n        table.set(offset + 0, undefined);\n        table.set(offset + 1, null);\n        table.set(offset + 2, true);\n        table.set(offset + 3, false);\n        ;\n    };\n    imports.wbg.__wbindgen_memory = function() {\n        const ret = wasm.memory;\n        return ret;\n    };\n    imports.wbg.__wbindgen_throw = function(arg0, arg1) {\n        throw new Error(getStringFromWasm0(arg0, arg1));\n    };\n\n    return imports;\n}\n\nfunction __wbg_init_memory(imports, memory) {\n\n}\n\nfunction __wbg_finalize_init(instance, module) {\n    wasm = instance.exports;\n    __wbg_init.__wbindgen_wasm_module = module;\n    cachedUint8ArrayMemory0 = null;\n\n\n    wasm.__wbindgen_start();\n    return wasm;\n}\n\nfunction initSync(module) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module !== 'undefined') {\n        if (Object.getPrototypeOf(module) === Object.prototype) {\n            ({module} = module)\n        } else {\n            console.warn('using deprecated parameters for `initSync()`; pass a single object instead')\n        }\n    }\n\n    const imports = __wbg_get_imports();\n\n    __wbg_init_memory(imports);\n\n    if (!(module instanceof WebAssembly.Module)) {\n        module = new WebAssembly.Module(module);\n    }\n\n    const instance = new WebAssembly.Instance(module, imports);\n\n    return __wbg_finalize_init(instance, module);\n}\n\nasync function __wbg_init(module_or_path) {\n    if (wasm !== undefined) return wasm;\n\n\n    if (typeof module_or_path !== 'undefined') {\n        if (Object.getPrototypeOf(module_or_path) === Object.prototype) {\n            ({module_or_path} = module_or_path)\n        } else {\n            console.warn('using deprecated parameters for the initialization function; pass a single object instead')\n        }\n    }\n\n    if (typeof module_or_path === 'undefined') {\n        module_or_path = new URL('raptorq_wasm_bg.wasm', import.meta.url);\n    }\n    const imports = __wbg_get_imports();\n\n    if (typeof module_or_path === 'string' || (typeof Request === 'function' && module_or_path instanceof Request) || (typeof URL === 'function' && module_or_path instanceof URL)) {\n        module_or_path = fetch(module_or_path);\n    }\n\n    __wbg_init_memory(imports);\n\n    const { instance, module } = await __wbg_load(await module_or_path, imports);\n\n    return __wbg_finalize_init(instance, module);\n}\n\nexport { initSync };\nexport default __wbg_init;\n"],"names":["EventEmitter","constructor","_events","Map","on","event","listener","has","set","get","push","off","listeners","index","indexOf","splice","length","delete","emit","args","forEach","error","console","once","onceWrapper","removeAllListeners","clear","listenerCount","ApiClient","config","host","apiBaseUrl","apiUrl","jwtToken","userId","setAuth","token","apiCall","endpoint","method","body","Error","options","headers","Authorization","JSON","stringify","response","fetch","ok","status","json","getDummyToken","sub","createRoom","roomName","roomType","room_name","room_type","listRooms","page","perPage","list_query","per_page","sort_by","sort_order","conditions","is_active","getRoomById","roomId","joinRoom","roomCode","appName","room_code","app_name","createSubRoom","parentRoomId","subRoomName","subRoomType","parent_room_id","getSubRooms","leaveRoom","membershipId","switchToSubRoom","subRoomCode","room_id","sub_room_code","getRoomMembers","updateRoom","updates","deleteRoom","Participant","streamId","role","isLocal","isAudioEnabled","isVideoEnabled","isPinned","publisher","subscriber","isScreenSharing","screenSubscriber","connectionStatus","getDisplayName","roleText","localText","toggleMicrophone","toggleMic","participant","enabled","action","toggleCamera","toggleRemoteAudio","toggleAudio","togglePin","switchBitrate","warn","pinned","setConnectionStatus","_getStatusText","setPublisher","setSubscriber","updateMicStatus","updateCameraStatus","cleanup","stop","getInfo","Publisher","publishUrl","streamType","currentConfig","codec","width","height","framerate","bitrate","kSampleRate","opusBaseTime","opusSamplesSent","opusSamplesPerChunk","opusChunkCount","stream","audioProcessor","videoProcessor","webTransport","isChannelOpen","sequenceNumber","isPublishing","cameraEnabled","micEnabled","hasCamera","undefined","hasMic","onStatusUpdate","message","isError","log","onStreamStart","onStreamStop","onServerEvent","wasmInitialized","wasmInitializing","wasmInitPromise","initAudioRecorder","WasmEncoder","publishStreams","videoEncoders","eventStream","subStreams","name","channelName","init","loadAllDependencies","document","querySelector","Promise","resolve","reject","script","createElement","src","onload","onerror","head","appendChild","default","then","catch","err","opusModule","Date","now","startPublishing","setupConnection","getMediaStream","startStreaming","turnOffCamera","turnOnCamera","turnOffMic","turnOnMic","sendMeetingEvent","eventType","targetStreamId","eventMessage","type","sender_stream_id","timestamp","target_stream_id","sendEvent","constraints","audio","sampleRate","channelCount","echoCancellation","noiseSuppression","video","ideal","frameRate","navigator","mediaDevices","getUserMedia","getDisplayMedia","videoTrack","getVideoTracks","onended","videoOnlyStream","MediaStream","videoTracks","addTrack","initVideoEncoders","subStream","startsWith","encoder","VideoEncoder","output","chunk","metadata","handleVideoChunk","e","latencyMode","hardwareAcceleration","metadataReady","videoDecoderConfig","WebTransport","ready","createEventStream","createBidirectionalStream","readable","writable","writer","getWriter","reader","getReader","initData","TextEncoder","encode","sendOverEventStream","setupEventStreamReader","sendPublisherState","workerInterval","Worker","postMessage","interval","lastPingTime","onmessage","ping","value","done","read","msg","TextDecoder","decode","parse","data","bytes","len","out","Uint8Array","view","DataView","buffer","setUint32","write","eventData","eventJson","stateEvent","configSent","sendOverStream","setupStreamReader","frameBytes","streamData","startVideoCapture","startOpusAudioStreaming","encoderObj","configure","triggerWorker","track","MediaStreamTrackProcessor","frameCounter","cameraEncoders","Array","from","entries","filter","_","obj","result","frame","window","videoBaseTimestamp","close","keyFrame","i","quality","isLastEncoder","encodeQueueSize","frameToEncode","VideoFrame","audioTrack","getAudioTracks","audioRecorderOptions","encoderApplication","encoderComplexity","encoderFrameSize","timeSlice","audioRecorder","ondataavailable","typedArray","handleOpusAudioChunk","start","decoderConfig","codedWidth","codedHeight","description","sendStreamConfig","chunkData","ArrayBuffer","byteLength","copyTo","packet","createPacketWithHeader","dataArray","performance","audioConfig","numberOfChannels","audioStartPerfTime","Math","floor","mediaType","configPacket","vConfigUint8","vConfigBase64","uint8ArrayToBase64","aConfigBase64","adjustedTimestamp","safeTimestamp","HEADER_SIZE","MAX_TS","MIN_TS","binary","chunkSize","subarray","String","fromCharCode","apply","btoa","startShareScreen","screenStream","startEvent","screenConfig","find","s","screenEncoder","handleScreenVideoChunk","encoderConfig","screenVideoEncoder","screenAudioRecorder","handleScreenAudioChunk","screenAudioBaseTime","screenAudioSamplesSent","screenVideoProcessor","stopShareScreen","screenBaseTimestamp","stopEvent","state","flush","getTracks","screenAudioConfig","sendScreenDecoderConfigs","hasAudio","videoReady","audioReady","videoConfig","isActive","streamInfo","activeStreams","keys","Subscriber","isOwnStream","mediaWorkerUrl","audioWorkletUrl","mstgPolyfillUrl","isStarted","worker","audioWorkletNode","videoGenerator","videoWriter","mediaStream","subscriberId","audioMixer","_updateConnectionStatus","channel","MessageChannel","_loadPolyfill","_initWorker","port2","_initAudioSystem","port1","_initVideoSystem","removeSubscriber","terminate","_cleanupVideoSystem","setAudioMixer","MediaStreamTrackGenerator","channelPort","_handleWorkerMessage","mediaUrl","port","reason","addSubscriber","bufferMs","isPlaying","newBufferSize","kind","releaseLock","channelData","timeStamp","audioEnabled","_handleVideoData","previousStatus","AudioMixer","audioContext","mixerNode","outputDestination","subscriberNodes","isInitialized","outputAudioElement","masterVolume","bufferSize","enableEchoCancellation","debug","initialize","_debug","AudioContext","webkitAudioContext","latencyHint","resume","createGain","gain","createMediaStreamDestination","connect","autoplay","style","display","setAttribute","_setupErrorHandlers","isOwnAudio","channelWorkletPort","_loadAudioWorklet","workletNode","AudioWorkletNode","numberOfInputs","numberOfOutputs","outputChannelCount","gainNode","addedAt","_updateOutputAudio","_setupWorkletMessageHandler","subscriberData","disconnect","setSubscriberVolume","volume","normalizedVolume","max","min","setSubscriberMuted","muted","setMasterVolume","getOutputMediaStream","getStats","subscriberCount","size","audioContextState","subscribers","map","id","getSubscriberIds","hasSubscriber","suspend","srcObject","parentNode","removeChild","audioWorklet","addModule","includes","onstatechange","addEventListener","hidden","_sleep","ms","setTimeout","Room","code","ownerId","apiClient","mediaConfig","participants","localParticipant","subRooms","pinnedParticipant","messages","typingUsers","join","room","joinResponse","stream_id","roomDetails","_updateFromApiData","_setupParticipants","_setupMediaConnections","values","leave","_cleanupMediaConnections","_cleanupParticipants","subRoomData","subRoom","user_id","subRoomsData","switchResponse","returnToMainRoom","sendMessage","text","trim","messageId","_generateMessageId","senderId","senderName","customData","messageEvent","deleteMessage","deleteEvent","m","updateMessage","newText","updateEvent","messageIndex","findIndex","updatedAt","sendTypingIndicator","isTyping","typingEvent","getMessages","limit","slice","getTypingUsers","clearMessages","addParticipant","memberData","_setupParticipantEvents","removeParticipant","getParticipant","getParticipants","pinParticipant","unpinParticipant","unpinnedParticipant","participantCount","subRoomCount","participantsData","participantData","_setupLocalPublisher","_setupRemoteSubscriber","_setupStreamEventForwarding","webtpUrl","_handleServerEvent","streamOutputEnabled","onStatus","joinedParticipant","membership_id","sender","user","p","roomData","random","toString","substr","_removeStreamEventForwarding","SubRoom","parentRoom","maxParticipants","autoReturn","duration","startTime","isTemporary","allowSelfAssign","_setupSubRoomEvents","joinFromMain","_pauseMediaConnections","joinResult","_startDurationTimer","_resumeMediaConnections","targetSubRoom","fromSubRoom","toSubRoom","inviteParticipant","inviteToSubRoom","assignParticipant","assignToSubRoom","broadcastMessage","broadcastToSubRoom","getRemainingTime","elapsed","remaining","ceil","extendDuration","additionalMinutes","newDuration","setMaxParticipants","current","isFull","isEmpty","hasExpired","remainingTime","warningTime","remainingMinutes","_durationTimer","clearTimeout","remainingMs","_handleExpiry","serialize","participantIds","createdAt","fromSerializedData","ErmisClient","reconnectAttempts","reconnectDelay","isAuthenticated","currentRoom","rooms","defaultVideoConfig","defaultAudioConfig","channels","_setupEventHandlers","authenticate","_setConnectionStatus","emailRegex","test","tokenResponse","access_token","authenticatedAt","manualAuthenticate","logout","_ensureAuthenticated","_setupRoomEvents","autoJoin","r","getRooms","getCurrentRoom","getRoom","joinSubRoom","sr","mainRoom","previousSubRoom","switchSubRoom","targetSubRoomCode","currentSubRoom","to","getState","roomCount","getConfig","updateConfig","newConfig","enableDebug","disableDebug","eventsToForward","_attemptReconnect","attempts","VERSION","ErmisClassroom","create","serverUrl","replace","client","version","events","CLIENT_AUTHENTICATED","CLIENT_AUTHENTICATION_FAILED","CLIENT_LOGGED_OUT","CLIENT_CONNECTION_STATUS_CHANGED","ROOM_CREATED","ROOM_JOINED","ROOM_LEFT","PARTICIPANT_ADDED","PARTICIPANT_REMOVED","PARTICIPANT_PINNED","PARTICIPANT_UNPINNED","AUDIO_TOGGLED","VIDEO_TOGGLED","REMOTE_AUDIO_STATUS_CHANGED","REMOTE_VIDEO_STATUS_CHANGED","SCREEN_SHARE_STARTED","SCREEN_SHARE_STOPPED","REMOTE_SCREEN_SHARE_STARTED","REMOTE_SCREEN_SHARE_STOPPED","PARTICIPANT_PINNED_FOR_EVERYONE","PARTICIPANT_UNPINNED_FOR_EVERYONE","SUB_ROOM_CREATED","SUB_ROOM_JOINED","SUB_ROOM_LEFT","SUB_ROOM_SWITCHED","LOCAL_STREAM_READY","REMOTE_STREAM_READY","STREAM_REMOVED","MESSAGE_SENT","MESSAGE_RECEIVED","MESSAGE_DELETED","MESSAGE_UPDATED","TYPING_STARTED","TYPING_STOPPED","CHAT_HISTORY_LOADED","ERROR","MediaDevices","getDevices","enumerateDevices","devices","cameras","d","microphones","speakers","checkPermissions","permissions","camera","query","microphone","RoomTypes","MAIN","BREAKOUT","PRESENTATION","DISCUSSION","ConnectionStatus","DISCONNECTED","CONNECTING","CONNECTED","FAILED","ParticipantRoles","OWNER","MODERATOR","PARTICIPANT","OBSERVER","wasm","cachedTextDecoder","ignoreBOM","fatal","cachedUint8ArrayMemory0","getUint8ArrayMemory0","memory","getStringFromWasm0","ptr","WASM_VECTOR_LEN","passArray8ToWasm0","arg","malloc","WasmEncoderFinalization","FinalizationRegistry","register","unregister","__wbg_wasmencoder_free","__destroy_into_raw","__wbg_ptr","free","mtu","ptr0","__wbindgen_malloc","len0","ret","wasmencoder_new","repair_packets_count","wasmencoder_encode","getMTU","wasmencoder_getMTU","getConfigBuffer","wasmencoder_getConfigBuffer","__wbg_load","module","imports","Response","WebAssembly","instantiateStreaming","arrayBuffer","instantiate","instance","Instance","__wbg_get_imports","wbg","__wbg_buffer_609cc3eee51ed158","arg0","__wbg_length_a446193dc22c12f8","__wbg_new_78feb108b6472713","__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a","arg1","arg2","__wbg_newwithlength_a381634e90c276d4","__wbg_push_737cfc8c1432c2c6","__wbg_set_65595bdd868b3009","__wbindgen_init_externref_table","table","__wbindgen_export_0","offset","grow","__wbindgen_memory","__wbindgen_throw","__wbg_finalize_init","exports","__wbg_init","__wbindgen_wasm_module","__wbindgen_start","module_or_path","Object","getPrototypeOf","prototype","URL","import","Request"],"mappings":"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"}